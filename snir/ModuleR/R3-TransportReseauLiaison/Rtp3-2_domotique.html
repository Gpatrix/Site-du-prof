<!DOCTYPE html>

<html 
  data-module="R"
  data-pagetype="TP"
  data-modulepartnumber="3"
  data-pagenumber="2"
  data-pageState="OK"
  data-pageheadtitle="Domotique"
  data-pagefulltitle="ContrÃ´le d'un rÃ©seau domotique JeedomÂ EnOcean"
  data-authorname="FranÃ§oisÂ GIRAULT"
  data-authormail="francois.girault@ac-versailles.fr"
  lang="fr">

<script src="../../js/operateData.js"></script>

<head> 
  <meta charset="utf-8">
  <script src="../../js/makeHead.js"></script>
</head>

<body>

<nav id="navPannel" style="display: block">
  <script src="../../js/makeNavPannel.js"></script>
</nav>

<div id="mainFrame">
  
<header class="band">
  <script src="../../js/makeHeader.js"></script>
</header> 

<div id="scrollingFrame">

<footer class="band">
  <script src="../../js/makeFooter.js"></script>
</footer>

<section>

<div id="mainTitle">
  <script src="../../js/makeTitle.js"></script>
</div>


<div class="expert">
<h3 class="nocount"> Objectifs pÃ©dagogiques </h3>


<p> L'<strong>objectif principal</strong> de ce sujet de travaux pratiques est de dÃ©couvrir la <strong class="title">technologie domotique</strong> sansâ€‘fil <strong class="specialLB">EnOcean</strong> et la box <strong class="specialLB">Jeedom</strong>, par la mise en place d'un petit rÃ©seau domotiqueÂ <strong><em class="sigle">WPAN</em></strong> (cf.Â cours, chap.Â R3â€‘VÂ <a class="cours" href="http://www.lycee-ferry-versailles.fr/snir/ModuleR/R3-TransportLiaisonReseau/Rc3-5_technologiesWPAN.html" target="_BLANK"></a>). </p>


 

<div class="prerequis" style="margin-top: 1em">
<p class="prerequis"> Pour traiter ces exercices, il est recommandÃ© d'avoir Ã©tudiÃ© les <strong>chapitresÂ R3â€‘IV</strong> etÂ <strong>R3â€‘V</strong> du cours. Des renvois aux principaux Ã©lÃ©ments de cours ou Ã  des pages web d'information gÃ©nÃ©rale sont donnÃ©s au fur et Ã  mesure des questions. </p>
</div><!-- prerequis -->
</div><!-- expert -->


<h2 class="nocount"> Mise en situation </h2>


<h3 class="nocount"> Environnement </h3>


<p> Les manipulations demandÃ©es sont Ã  accomplir sur un <strong class="title">rÃ©seau local</strong> (<strong class="title"><em class="sigle">LAN</em></strong>) utilisant la pile de protocoleÂ <strong><em class="sigle">TCP/IP</em></strong>, raccordÃ© Ã  l'<strong>Internet</strong>, de prÃ©fÃ©rence <strong class="warning">sans serveur proxy pÃ©dagogique</strong>. En effet, un tel serveur pose des problÃ¨mes d'accÃ¨s Ã  divers composants logiciels de l'application <strong class="defin">Jeedom</strong>. </p>


<h3 class="nocount" id="miseEnSituation"> Ã‰quipement </h3>


<p> Les manipulations demandÃ©es requiÃ¨rent le <strong class="title">matÃ©riel</strong> listÃ© ciâ€‘dessous. </p>

<ul>
  <div style="display: inline-block;">
    <img class="top-right" src="../img/Rtp32_archi.png" width="400px" style="padding-top: 0.5em">
  <li> Pour jouer le rÃ´le de <strong class="specialLB">box domotique Jeedom</strong>, on emploie un <strong>nanoâ€‘ordinateur</strong> <strong class="Raspberry">RaspberryÂ PiÂ 3</strong> ouÂ <strong class="Raspberry">PiÂ 4</strong>Â : </li>
  <ul>
    <li> avec une carte <strong>MicroSD</strong> sur laquelle est Ã©ventuellement dÃ©jÃ  installÃ© un <strong>systÃ¨me d'exploitation</strong> de type <strong class="Raspberry">RaspberryÂ PiÂ OS 64Â bits lite</strong> (sans bureau)Â ; </li>

    <!--
     â€“Â en effet, la version <strong>Bullseye</strong> plus rÃ©cente des <strong class="cons">problÃ¨mes d'intÃ©gration</strong> de la <strong>passerelle EnOcean</strong>Â ; -->

    <li> dont l'<strong>adresseÂ <em class="sigle">IP</em></strong> est connue, pour pouvoir s'y connecter avec un poste de travail sur le mÃªme rÃ©seau. On rappelle qu'en cas de configurationÂ <strong><em class="sigle">DHCP</em></strong>, il est utile de connaÃ®tre prÃ©alablement l'<strong>adresseÂ <em class="sigle">MAC</em></strong> de la carte pour pouvoir dÃ©terminer son adresseÂ <strong><em class="sigle">IP</em></strong> en scannant le rÃ©seau.</li>   
  </ul>

  <li> On utilise <strong class="specialLB">poste de travail</strong> (typiquement, unÂ PC) comme <strong>terminal de commande</strong> pour l'installation du systÃ¨me et du logiciel de la box, puis son utilisation via un <strong>navigateur web</strong>. </li>

  <div class="nobullet"> Les deux machines doivent donc Ãªtre l'une et l'autre <strong class="defin">raccordÃ©es au mÃªme rÃ©seau</strong> et se voir attribuer une <strong>adresseÂ <em class="sigle">IP</em></strong> sur le <strong class="defin">mÃªme segment</strong> pour pouvoir communiquer. </div>
  </div><!-- display -->

  <li> Autour de la box, on met en Å“uvre ensemble d'<strong class="specialLB">Ã©quipements domotiques</strong> certifiÃ©s <strong class="specialG">EnOcean</strong>Â : </li>
    <img class="top-left" src="../img/Rtp32_equipementEnOcean.png" height="120px">
  <ul>
  	<li> un <strong>contrÃ´leurâ€‘passerelle</strong> <em class="mark">USB300DC O2Line</em>Â <a class="external" href="http://bit.ly/2eVzXZ27" target="_BLANK"></a> â€“Â il s'agit d'un dongleÂ <em class="sigle">USB</em> Ã©metteurâ€‘rÃ©cepteur <em class="mark">EnOcean</em>Â 868Â MHz) Ã  brancher sur la carte <em class="mark">RaspberryÂ Pi</em>Â ; </li>

      
  	<li> une <strong>prise Ã©lectrique commandable</strong> <em class="mark">smartÂ plug NodOn</em>Â <a class="external" href="https://nodon.fr/nodon/prise-intelligente-metering-enocean/" target="_BLANK"></a>Â ; </li>

    <li> un <strong>capteur d'ouverture</strong> <em class="mark">door/window sensor NodOn</em>Â <a class="external" href="https://nodon.fr/nodon/detecteur-douverture-portes-et-fenetres-enocean/" target="_BLANK"></a>Â ; </li>

    <li> une <strong>prise Ã©lectrique commandable</strong> <em class="mark">micro smartÂ plug NodOn</em>Â <a class="external" href="https://nodon.fr/nodon/micro-smart-plug-enocean/" target="_BLANK"></a>Â ; </li>

  	<li> une <strong>tÃ©lÃ©commande 4Â boutons</strong> <em class="mark">soft remote NodOn</em>Â Â <a class="external" href="https://nodon.fr/nodon/la-telecommande-soft-remote-enocean/" target="_BLANK"></a>. </li>
  </ul>
</ul>






	







<h2 class="nocount"> Travail demandÃ© </h2>


<div class="important" style="margin-left: 0em;">
<p> Effectuer toutes les manipulations demandÃ©es en veillant au <strong class="warning">respect des consignes</strong>, dans l'ordre, sans oublier d'Ã©tape. En cas de doute sur un branchement ou une manipulation, ne pas hÃ©siter Ã  solliciter l'enseignant. Au fur et Ã  mesure, penser Ã  <strong class="specialG">sauvegarder</strong> les modifications.</p>
<!--
<p> RÃ©diger un <strong class="title">rapport d'activitÃ©</strong> qui rÃ©capitule les Ã©tapes du travail accompli avec un niveau suffisant de dÃ©tails technique pour permettre Ã  un technicien peu expÃ©rimentÃ© de rÃ©ussir les mÃªmes procÃ©dures. On veillera Ã  bien mettre en Ã©vidence la dÃ©marche suivie.</p>
-->
</div><!-- important -->


<ol class="exercice">

  <li id="exo1" style="margin-top: 2em;"> <em class="bold">PrÃ©paration du rÃ©seau et du nanoâ€‘ordinateur</em> </li>

  <ol class="questions">
    <li> Raccorder le <strong class="title">poste de travail</strong> Ã  la <strong>boxÂ <em class="sigle">FAI</em></strong> via le switch. Laisser son interface rÃ©seau enÂ <strong><em class="sigle">DHCP</em></strong> mais <strong class="defin">supprimer</strong> tout recours Ã  un <strong>serveur mandataire</strong> (<em class="english">proxy server</em>). </li>


		<li> Si la carte <strong class="Raspberry">Raspberry Pi</strong> dispose pas d'une carteÂ <strong>MicroSD</strong> avec le systÃ¨me d'exploitation <strong>RaspberryÂ PiÂ OS</strong> recommandÃ© supra, procÃ©der Ã  l'installation de ce systÃ¨me sur la carte â€“Â cf.Â la procÃ©dure donnÃ©e dans le sujet deÂ TPÂ R2â€‘2Â <a class="previous" href="../R2-Applications/Rtp2-2_serveurWeb.html#prepaServeur" target="_BLANK"></a>. </li>
    
    <!-- 
    <div class="nobullet"> Pour confÃ©rer au futur systÃ¨me une <strong>adresseÂ <em class="sigle">IP</em> statique</strong>, il est recommandÃ© de paramÃ©trer dÃ¨s Ã  prÃ©sent le fichierÂ <code class="filename">/etc/dhcpcd.conf</code> (demander Ã  l'enseignant la valeurÂ <strong class="warning">x</strong> Ã  choisir pour Ã©viter les conflit d'adresseÂ <em class="sigle">IP</em> avec d'autres systÃ¨mes en service).  </div>
    -->
    
    <li> Monter la carteÂ <strong>MicroSD</strong> sur la carte <strong class="Raspberry">Raspberry Pi</strong>, raccorder cette derniÃ¨re au switch puis la mettre sous tension et attendre le chargement complet du systÃ¨me avant d'ouvrir une <strong class="title">connexion distante</strong>Â <code class="cmd">ssh</code> depuis le poste de travail.  </li>

    <li> ProcÃ©der au <strong class="title">paramÃ©trage du systÃ¨me d'exploitation</strong> â€“Â cf.Â la procÃ©dure donnÃ©e dans le sujet deÂ TPÂ R2â€‘2Â <a class="previous" href="../R2-Applications/Rtp2-2_serveurWeb.html#prepaServeur" target="_BLANK"></a>Â : </li>

    <ul>
      <!-- 
      <li> changement du <strong>mot de passe</strong> (demander Ã  l'enseignant lequel choisir et le noter dans un fichier), </li>
      -->

      <li> rÃ©glage de la <strong>date</strong>, </li>
    
      <li> rÃ©glage des <strong>paramÃ¨tres rÃ©gionaux</strong>, </li>

      <li> <strong>mise Ã  jour</strong> du systÃ¨me et redÃ©marrage,</li>
    </ul>

    <div class="nobullet"> sachant que la mise Ã  jour peut prendre <strong class="cons">plus deÂ 10Â minutes</strong>. </div>

  </ol><!-- questions - exo1 -->










  <li id="exo2" style="margin-top: 2em;"> <em class="bold">Installation et paramÃ©trage du logiciel de box domotique</em> </li>
  
  <ol class="questions">
    <li> Toujours en connexion distanteÂ </strong><code class="cmd">ssh</code> depuis le poste de travail, installer l'<strong class="title">application Jeedom</strong> en suivant les indications du cours,Â <strong>chap.Â R3â€‘V</strong>Â <a class="cours" href="Rc3-5_technologiesWPAN.html#boxJeedom" target="_BLANK"></a>. </li>

    <div class="nobullet"> Attention, cette opÃ©ration est <strong class="cons">longue</strong>, elle peut prendre plusieurs dizaines de minutes voire plus d'une heure selon de dÃ©bit de la connexion et le nombre de box qui sont installÃ©s simultanÃ©ment dans le cadre de la sÃ©ance de travaux pratiques. </div>

    <li> Via un <strong>navigateur</strong> sur le poste de travail, <strong class="title">se connecter</strong> Ã  la <strong>box Jeedom</strong> en saisissant son <strong>adresseÂ <em class="sigle">IP</em></strong> comme <strong><em class="sigle">URL</em></strong>. Utiliser les identifiants par dÃ©faut (<code>admin/admin</code>). </li>
    
    <ul>
      <li> Changer le <strong>mot de passe</strong> avec celui indiquÃ© par votre enseignant. Avec identifiant associÃ©, le noter dans un fichier pour le retrouver en cas d'oubli ultÃ©rieur. </li>
    
      <li> Appeler l'enseignant pour la connexion au <strong>compte Jeedom Market</strong>. </li>
    </ul>
    
    
    <div class="nobullet"> Explorer les diffÃ©rents menus. Dans le sousâ€‘menu <span class="Noir">Configuration/GÃ©nÃ©ral</span>, renseigner les <strong>coordonnÃ©es gÃ©ographiques</strong> et l'adresse de l'installation de la box (adresse de l'Ã©tablissement scolaire). </div> 

    <!--
    <li> Selon l'architecture duÂ <em class="sigle">LAN</em>, dans le sousâ€‘menu <span class="Noir">Configuration/RÃ©seau</span>, renseigner la configuration du <strong class="title">serveur proxy</strong> si le rÃ©seau en possÃ¨de un. </li>  

    <div class="remarques">
      <p class="remarque"> Le cas Ã©chÃ©ant, il peut Ã©galement Ãªtre nÃ©cessaire de renseigner cette configuration dans le systÃ¨me <em class="mark">Debian</em> luiâ€‘mÃªme (crÃ©er un fichier <code class="filename">proxy.sh</code> dans le rÃ©pertoire <code>/etc/profile.d</code>Â <a class="external" href="https://doc.ubuntu-fr.org/proxy_terminal" target="_BLANK"></a>). </p>
    </div> -->
  </ol><!-- questions (exo 2) -->
    








  <li id="exo3" style="margin-top: 2em;"> <em class="bold">Installation des Ã©quipements domotiques </em> </li>

  <ol class="questions" id="declarationObjets">
    <li> Via le menu <span class="Noir">Outils</span>, <strong class="title">dÃ©clarer les objets</strong> <code>Maison</code>, <code>Rezâ€‘deâ€‘chaussÃ©e</code>, <code>Cuisine</code>, <code>Placard</code>, <code>Escalier</code>, <code>Ã‰tage</code>, <code>Chambre</code>, avec les <strong>liens de parentÃ©s</strong> pour prendre en compte le fait queÂ : </li>
    <ul>
      <li> la chambre est Ã  l'Ã©tage, </li>

      <li> les autres piÃ¨ces sont au rezâ€‘deâ€‘chaussÃ©e,</li>

      <li> et le placard est dans la cuisine. </li>
    </ul> 

    <img class="top-left" src="../img/R3tp2_objets.png">

    <div class="nobullet"> <em>Ces Ã©lÃ©ments ne seront pas tous utilisÃ©s par la suite, mais le but est d'apprendre Ã  crÃ©er une structure arborescente conforme Ã  la constitution d'une habitation.</em> </div>
    
    <li> Mettre en place le <strong class="title">contrÃ´leurâ€‘passerelle</strong>Â <strong class="title">EnOcean</strong> en suivant les Ã©tapes dÃ©crites ciâ€‘dessous. </li>
    <ul>
      <div style="display: inline-block;"> 
        <img class="top-right" src="../img/JeedomPluginEnOcean.png" width="100px" style="padding-top: 0.5em">
      <li> Via le menu <span class="Noir">Plugin/Gestion des plugins/Market</span>, installer le <strong>plugin EnOcean</strong> (il est dÃ©jÃ  payÃ© avec le compte <em class="english">Market</em> sÃ©lectionnÃ© par l'enseignant). Ouvrir la <strong>page web</strong> de paramÃ©trage du plugin via le lien proposÃ© par l'application. </li>
      </div><!-- display -->

      <div style="display: inline-block;"> 
        <img class="top-right" src="../img/EnOcean_USB300.png" width="200px" style="padding-top: 0.5em">
      <li> Brancher le <strong>contrÃ´leurâ€‘passerelle</strong> <em class="mark">USB300DC</em> sur un portÂ <strong><em class="sigle">USBÂ 2.O</em></strong> de la carte <em class="mark">Raspberry Pi</em>. Normalement, sa <strong class="specialSG">led verte</strong> doit s'allumer et rester fixe. </li>
      </div><!-- display -->

         
      <li> Dans la page web de <strong>paramÃ©trage du plugin</strong> <span class="Noir">EnOcean (openenocean) - stable</span>Â : </li>

    <ul style="list-style: circle;">
      <li> dans l'encart <code>Ã‰tat</code>, cliquer sur le boutonÂ <code>Activer</code>Â ; d'autres encart â€“Â notamment <code>Configuration</code>Â â€“ doivent alors apparaÃ®treÂ ; </li>

      <li> dans l'encart <code>Configuration</code>, sÃ©lectionner pour le <strong>port EnOcean</strong> celui qui est spÃ©cifiquement reconnu par le systÃ¨me, typiquementÂ : <br> 
      <span class="inline">
        <span class="Noir">EnOcean_GmbH EnOcean_USB_300_DC (/dev/tty/USB0)</span>
      </span> <br> 
      puis cliquer sur le bouton <span class="Vert">ğŸ—¸Sauvegarder</span>Â ; </li>

      <li> dans l'encart <code>DÃ©pendances</code>, <strong class="warning">seulement</strong> si le statut estÂ <span class="Rouge">NOK</span>, cliquer sur le boutonÂ <span class="Orange">Relancer</span> (cette opÃ©ration peut prendre plusieurs minutes)Â ; </li>

      <li> dans l'encart <code>DÃ©mon</code>, vÃ©rifier que la <code>configuration</code> et le <code>statut</code> sont tous les deuxÂ <span class="Vert">OK</span>Â ; </li>
      <ul style="list-style: circle">
      	<li> si seul le <code>statut</code> estÂ <span class="Rouge">NOK</span>, cliquer surÂ le bouton <code>(Re)DÃ©marrer</code>Â <span class="Vert">â–¶</span>Â ;</li>

      	<li> si la <code>configuration</code> estÂ <span class="Rouge">NOK</span>, vÃ©rifier que la configuration est conforme et sauvegardÃ©e comme demandÃ© supraÂ ; si tel est le cas, relancer l'installation des dÃ©pendances. </li>
      </ul><!-- circles -->

      <div class="nobullet"> Le dÃ©mon doit Ãªtre placÃ© en <code>Gestion automatique</code>, c'estâ€‘Ã â€‘dire avec le bouton <span class="Rouge">ğŸ—™DÃ©sactiver</span> <strong>visible</strong>. </div>
    </ul>
  </ul>  
    
    
  <li id="inclusionZwave"> Inclure les <strong class="title">Ã©quipements domotiques</strong> dans le rÃ©seau <strong>EnOcean</strong>. </li>


    <ul>
    	<li> via le menu <span class="Noir">PluginÂ / GestionÂ desÂ pluginsÂ / ProtocolesÂ domotiques</span>, sÃ©lectionner la page web d'utilisation du protocole <strong>EnOcean</strong>. </li>

    	<img class="top-left" src="../img/Rtp32_EnOcean.png" style="max-width: 800px">

      <li> L'inclusion dans le <strong><em class="sigle">WPAN</em> EnOcean</strong> d'un Ã©quipement compatible obÃ©it au processus dÃ©crit ciâ€‘dessous pour une <strong class="specialLB">prise Ã©lectrique commandable</strong>. </li>

      <div style="display: inline-block;"> 
        <img class="top-right" src="../img/EnOcean_smartPlug_3.png" width="200px" style="padding-top: 0.5em">
      <ul style="list-style: circle;">
        <li> Brancher la prise Ã©lectrique commandable <strong>smartÂ plug</strong> dans une prise murale et vÃ©rifier prÃ©alablement que son <strong class="specialSG">bouton lumineuxÂ ON/OFF</strong> est opÃ©rationnel. Sur cette prise, brancher une <strong>veilleuse</strong> fournie avec son capteur de luminositÃ© obturÃ© (pour qu'elle s'allume en permanence si elle est alimentÃ©e). </li>
      
        <li> Dans la page web du protocole <strong>EnOcean</strong>, cliquer sur le bouton <code>Mode Inclusion</code>. </li>

        <li> Appuyer alors au moins <strong>2Â secondes</strong> sur le <strong class="specialSG">bouton lumineuxÂ ON/OFF</strong> de la prise. Ce dernier doit alors devenir <strong class="specialR">rouge</strong> fixe puis clignoter en <strong class="specialSG">vert</strong> trois fois avant de reprendre son Ã©tat initial. </li>

        <li> La page page web du protocole <strong>EnOcean</strong> doit alors rÃ©agir et faire apparaÃ®tre une vignette de la prise dans la rubrique <span class="Noir">MesÂ Ã©quipementsÂ EnOcean</span>. </li>
      
      	<li> Cliquer sur cette vignette pour paramÃ©trer l'Ã©quipement. Le nommer <code>prise lumiÃ¨re</code>, l'associer Ã  l'objet parentÂ <code>Placard</code> et Ã  la catÃ©gorie <code>LumiÃ¨re</code>. Cocher les cases <code>Activer</code> et <code>Visible</code>, pour que l'Ã©quipement soit reprÃ©sentÃ© par un <strong>widget</strong> dans le <span class="Noir">Dashboard</span>. Cliquer sur le bouton <span class="Vert">ğŸ—¸Sauvegarder</span>. </li>

        <div class="nobullet"> Sur cette mÃªme page, cliquer sur l'onglet <span class="Noir">Commandes</span>. Cliquer sur le bouton <span class="Gris">Tester</span> des commandes <code>On</code>, <code>Etat</code>, <code>Off</code>, <code>Etat</code> et vÃ©rifier que la prise rÃ©pond correctement Ã  ces commandes. </div>
      </ul><!-- circles -->
      </div><!-- display -->


      
      <li> Recommencer la mÃªme procÃ©dure pour les <strong class="specialLB">autres Ã©quipements</strong> listÃ©s dans la section <em>Mise en situation</em> supraÂ <a class="supra" href="Rtp3-2_domotique.html#miseEnSituation"></a>, sachant queÂ : </li>
       <ul style="list-style: circle">
        <li> le <strong>capteur d'ouverture</strong> est Ã  associer Ã  l'objet <code>placard</code> (lui attribuer le nom <code>capteur porte</code>) et Ã  la catÃ©gorie <code>LumiÃ¨re</code>Â ;  </li>
      
        <li> la deuxiÃ¨me <strong>prise commandÃ©e</strong>  et la <strong>tÃ©lÃ©commande</strong> sont Ã  associer Ã  l'objet <code>Maison</code> et Ã  la catÃ©gorie <code>Chauffage</code>. </li>
      </ul><!-- circles -->
      
      <div class="nobullet"> Pour chaque Ã©quipement, il fautÂ : </div> 

      <ul style="list-style: circle">
        <li> consulter son mode d'emploi pour identifier le <strong>bouton</strong> sur lequel appuyer lors de la <strong>procÃ©dure d'inclusion</strong>.  </li>
        
        <li> vÃ©rifier les diffÃ©rentes <strong>commandes</strong> compte tenu du type d'Ã©quipement. </li>
      </ul><!-- circles -->
  </ol><!-- questions (exo 2) -->













  <li id="exo4" style="margin-top: 2em;"> <em class="bold">Codage de scÃ©narios de commande</em> </li>

  <ol class="questions">
    <li> DÃ©couverte du <strong class="title">Dashboard</strong>. </li>
    <ul>
      <div style="display: inline-block;"> 
          <img class="top-right" src="../img/Rtp32_widgetsEnOcean.png" width="400px" style="padding-top: 0.5em">
      <li> Dans le menu <span class="Noir">Accueil/Dashboard</span>, passer en mode Ã©dition (bouton Â«Â styloÂ Â» Ã  droite), rÃ©partir et agrandir suffisamment les <strong>widgets</strong> qui reprÃ©sentent chaque Ã©quipement pour pouvoir visualiser l'intÃ©gralitÃ© de leur contenu.  </li>
      </div><!-- display -->
      
      <li> VÃ©rifier que l'Ã©quipement <code>prise lumiÃ¨re</code> rÃ©pond bien aux commandesÂ <em>on/off</em> en cliquant sur son icÃ´ne <code>Ã‰tat</code>.</li>

      <li> VÃ©rifier que l'icÃ´ne associÃ© Ã  l'Ã©tat de l'Ã©quipement <code>capteur porte</code> est conforme Ã  l'Ã©loignement de l'aimant par rapport au corps du capteur. </li>    
    </ul>

    <li> GrÃ¢ce Ã  un <strong class="title">premier scÃ©nario de fonctionnement</strong>, on souhaite utiliser l'Ã©quipementÂ <code>prise lumiÃ¨re</code> pour commander l'Ã©clairage du placard afin qu'il <strong>s'allume automatiquement</strong> lorsque la porte est ouverte (comme dans un rÃ©frigÃ©rateur) â€“Â Ã©tat dÃ©tectÃ© par l'Ã©quipement <code>capteur porte</code>. </li>

    <ul>
      <li> Dans le menu <span class="Noir">Outils/ScÃ©narios</span>, ajouter un <strong>nouveau scÃ©nario</strong>Â :  </li>
      <ul style="list-style: circle">
        <li> l'associer au groupe <code>Ã‰clairage</code> et Ã  l'objet <code>Placard</code> et cocher la case <code>Visible</code> pour qu'il apparaisse dans le <code>Dashboard</code>Â ; </li>

        <li> choisir son mode de dÃ©clenchement <code>ProvoquÃ©</code> par un Ã©vÃ©nement liÃ© au changement d'Ã©tat du <code>capteur porte</code> (cliquer sur le bouton <code>Choisir une commande</code>â€¦)Â ;  </li>

        <li> cliquer sur le bouton <span class="Gris">Ajouter bloc</span> pour programmer le scÃ©nario sous la forme d'une condition logique <code>SI/ALORS/SINON</code> (cliquer sur les boutons contextuels et choisir les expressions proposÃ©es conformÃ©ment Ã  la spÃ©cification supra)Â ;  </li>

        <li> cliquer sur le bouton <span class="Orange">ExÃ©cuter</span> puis vÃ©rifier le bon fonctionnement du scÃ©nario en approchant et Ã©loignant l'aimant du capteur d'ouverture (le wall plug doit respectivement s'Ã©teindre et s'allumer).  </li>

        <li> cliquer sur le bouton <span class="Vert">ğŸ—¸Sauvegarder</span>. </li>
      </ul><!-- circles -->

      <li> Revenir Ã  la page du <code>dashboard</code> et vÃ©rifier que le scÃ©nario dispose d'un <strong>widget</strong>. Observer le dÃ©roulement du scÃ©nario, puis l'effet de son activation ou dÃ©sactivation. </li>
    </ul>

    <li> GrÃ¢ce Ã  un <strong class="title">deuxiÃ¨me scÃ©nario de fonctionnement</strong>, on souhaite commander <strong>un ventilateur</strong> branchÃ© sur une prise commandÃ©e en <strong>fonctionnement intermittent</strong>. </li>
    <ul>
      <li> Dans un contexte rÃ©el, on adopterait par exemple une mise en marche deÂ 5Â minutes toutes les heures. Mais dans le cadre de cet exercice, pour faciliter la vÃ©rification du bon dÃ©roulement du scÃ©nario, on paramÃ©trera un fonctionnement d'<strong>1Â minute</strong> <strong>toutes les 2 minutes</strong>. </li>
    
      <li> On conditionnera Ã©galement la mise en marche au fait que le boutonÂ nÂºÂ 1 de la <strong>tÃ©lÃ©commande</strong> est appuyÃ© (appui bistable). En cas d'appui (signal au niveau haut), le ventilateur doit se mettre immÃ©diatement en marche intermittente. En cas de nouvel appui (signal au niveau bas), le ventilateur doit s'arrÃªter immÃ©diatement et ne plus se remettre en marche tant que le bouton n'est pas appuyÃ© Ã  nouveau  </li>
    </ul>
    
    <div class="nobullet"> Suivre une procÃ©dure analogue Ã  la prÃ©cÃ©dente, mais cette fois en choisissant l'option <code>Les deux</code>, c'estâ€‘Ã â€‘dire un <strong>scÃ©nario programmÃ© et dÃ©clenchÃ©</strong>.</code> </div> 
    <ul>
      <li> Cliquer sur le bouton <span class="Gris">Programmation</span> et choisir un mode <code>rÃ©current</code> toutes lesÂ 5Â minutes, puis remplacer la valeurÂ <code>5</code> parÂ <code>2</code> dans le champ de programmation â€“Â codÃ© avec une syntaxe <em class="mark">Linux cron</em>Â <a class="external" href="https://fr.wikipedia.org/wiki/Cron" target="_BLANK">W</a>.  </li>
    
      <li> Cliquer sur le bouton <span class="Gris">DÃ©clencheur</span> pour dÃ©finir l'Ã©lÃ©ment dÃ©clencheur selon le mÃªme principe qu'au scÃ©nario prÃ©cÃ©dent.  </li>
    </ul>

    <div class="nobullet"> Ensuite, cliquer sur le bouton <span class="Gris">Ajouter bloc</span> pour programmer le scÃ©nario, sachant que parmi les blocs disponibles, on trouve le blocÂ <code>DANS</code> qui permet de commander une <strong>action diffÃ©rÃ©e</strong>. </div>
  </ol><!-- questions (exo 4) --> 



</ol><!-- exercices -->


</section>

</div><!-- #scrollingFrame -->

</div><!-- #mainFrame -->

</body>

</html>
