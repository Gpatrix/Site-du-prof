<!DOCTYPE html>

<html 
  data-module="C"
  data-pagetype="Exercices"
  data-modulepartnumber="3"
  data-pagenumber="0"
  data-pageState="OK"
  data-pageheadtitle="NumÃ©ration"
  data-pagefulltitle="Typage Ã©lÃ©mentaire et numÃ©ration"
  data-authorname="FranÃ§oisÂ GIRAULT"
  data-authormail="francois.girault@ac-versailles.fr"
  lang="fr">

<script src="../../js/operateData.js"></script>

<!-- The following script MUST be coded here and not anywhere else! -->
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script> 

<head> 
  <meta charset="utf-8">
  <script src="../../js/makeHead.js"></script>
</head>

<body>

<nav id="navPannel" style="display: block">
  <script src="../../js/makeNavPannel.js"></script>
</nav>

<div id="mainFrame">
  
<header class="band">
  <script src="../../js/makeHeader.js"></script>
</header> 

<div id="scrollingFrame">

<footer class="band">
  <script src="../../js/makeFooter.js"></script>
</footer>

<section>

<div id="mainTitle">
  <script src="../../js/makeTitle.js"></script>
</div>









<div class="expert">
<h3 class="nocount"> Objectifs pÃ©dagogiques </h3>


<p> Les principaux objectifs de cette <strong class="title">feuille d'exercices</strong> sontÂ : </p>

<ul>
  <li> de <strong class="defin">diversifier</strong> la gamme des types utilisÃ©s (en particulier les types entiers Ã  largeur spÃ©cifiÃ©e du langageÂ <strong>C</strong>)Â ;  </li>

  <li> de dÃ©couvrir les <strong class="defin">opÃ©rateurs de calcul</strong> sur les <strong>mots binaires</strong> (opÃ©rateurs logiques bits Ã  bits, opÃ©rateurs de dÃ©calage de bits)Â ; </li>

  <li> d'approfondir l'usage des fonctions d'<strong class="defin">entrÃ©es-sorties standards</strong>. </li>
</ul>


<div class="prerequis" style="margin-top: 1em">
<p class="prerequis"> Pour traiter ces exercices, il est recommandÃ© d'avoir Ã©tudiÃ© le cours jusqu'au <strong>chapitre</strong>Â <strong class="warning">C3â€‘IX</strong> <strong>inclus</strong> (Ã  l'exception du chap.Â C3â€‘IV). NÃ©anmoins, certains exercices ne font appel qu'Ã  un nombre ciblÃ© de connaissances et des renvois aux principaux Ã©lÃ©ments de cours requis sont indiquÃ©s au fur et Ã  mesure des questions. </p>
</div><!-- prerequis -->
</div><!-- expert -->



<h2 class="nocount"> Travail demandÃ© </h2>



<div class="important" style="margin-left: 0em;">
<p> Les <strong class="title">exercices</strong> sont presque tous <strong class="defin">indÃ©pendants</strong> les uns des autres, mais ordonnÃ©s par niveaux croissants de difficultÃ©s et de connaissances requises. Certaines questions peuvent Ãªtre traitÃ©es sur <strong>cahier</strong>, mais la plupart nÃ©cessitent l'emploi d'un <strong>ordinateur</strong>. </p>

<p> Pour coder les programmes, il est recommandÃ© d'utiliser un Ã©diteur de code comme <strong class="Sublime">Sublime Text</strong> (cf.Â chap.Â C1â€‘IIÂ <a class="previous" href="../C1-Generalites/Cc1-2_langagesCetCpp.html#SublimeText" target="_BLANK"></a>).  </p>

<ul>
  <li> Enregistrer chaque <strong>fichier source principal</strong> en le nommant conformÃ©ment Ã  la numÃ©rotation des exercices, c'estâ€‘Ã â€‘dire par exemple pour l'exerciceÂ <em class="bold">2</em>, questionÂ <em class="bold">a</em>Â :  <br>
  <span class="inline">
    <code class="filename">C3exo2_a.c</code>
  </span> </li>

  <li> L'ensemble des fichiers sources doivent Ãªtre regroupÃ©s dans un <strong class="specialT">rÃ©pertoire d'exercices</strong> nommÃ© par exempleÂ <code class="filename">C3_EXOS</code>. </li>

  <li> La <strong>compilation</strong> des programmes peuvent Ãªtre effectuÃ©sÂ : </li>
  
  <ul>
    <li> soit avec la commande <code>gcc</code> directement dans un terminal exÃ©cutÃ© depuis le rÃ©pertoire d'exercices (cf.Â chap.Â C1â€‘IIÂ <a class="previous" href="../C1-Generalites/Cc1-2_langagesCetCpp.html#gccEmploi" target="_BLANK"></a>)Â ;  </li>

    <li> soit, sauf pour l'exerciceÂ nÂºÂ 4, en copiant/collant chaque code source dans un environnement de programmation en ligne comme <strong class="OnlineGDB">OnlineGDB</strong>Â <a class="external" href="https://www.onlinegdb.com/" target="_BLANK"></a>.</li>
  </ul>
</ul>

<p> L'exerciceÂ <em class="bold">nÂºÂ 5</em> est en relation avec le sujet deÂ <em class="bold">TPÂ nÂºÂ C3â€‘1</em>. </p>
</div><!-- important -->











<ol class="exercice">


  <li id="exo1"> <em class="bold">Limites d'encodage des types entiers et dÃ©cimaux standards</em></li>

  <div class="nobullet"> 
  <p> Coder un programme qui affiche les <strong class="title">limites d'encodage</strong> des <strong class="defin">types entiers standards</strong>, en utilisant non <strong class="warning">pas des valeurs numÃ©riques</strong> mais les <strong class="specialN">pseudoâ€‘constantes</strong> dÃ©finies dans le fichier d'enâ€‘tÃªteÂ <code class="filename">limits.h</code> de la bibliothÃ¨que standard du langageÂ <strong>C</strong> (cf.Â chap.Â C3â€‘IIÂ <a class="cours" href="Cc3-2_typesEntiers.html#limits" target="_BLANK"></a>). On doit obtenir une exÃ©cution produisant en sortie standard l'affichage ciâ€‘dessous. </p> 


<!---------- ne pas indenter ---------->
<pre class="displayDark">
    TYPE DESCRIPTOR |           MIN. VALUE |           MAX. VALUE 
               char |                 -128 |                  127 
      unsigned char |                    0 |                  255 
              short |               -32768 |                32767 
     unsigned short |                    0 |                65535 
                int |          -2147483648 |           2147483647 
       unsigned int |                    0 |           4294967295 
               long | -9223372036854775808 |  9223372036854775807 
      unsigned long |                    0 | 18446744073709551615 
          long long | -9223372036854775808 |  9223372036854775807 
 unsigned long long |                    0 | 18446744073709551615 
</pre>
<!---------- ne pas indenter ---------->

  <p> Pour la <strong>premiÃ¨re ligne</strong> du tableau, on pourra coder l'instructionÂ (cf.Â chap.Â C2â€‘VIÂ <a class="previous" href="../C2-ElementsLangage/Cc2-6_entreesSortiesStandards.html#controleEspacement" target="_BLANK"></a>)Â : <br>
  <span class="inline">
    <code class="prettyprint lang-c" style="font-size: 80%">printf(" %18s | %20s | %20s \n", "TYPE DESCRIPTOR", "MIN. VALUE", "MAX. VALUE");</code>
  </span> <br>
  et pour les <strong>lignes suivantes</strong>, on pourra reprendre la <strong class="pros">mÃªme chaÃ®ne de format</strong> en adaptant les <strong class="specialDR">spÃ©cifications de conversions</strong> (cf.Â chap.Â C2â€‘VIÂ <a class="previous" href="../C2-ElementsLangage/Cc2-6_entreesSortiesStandards.html#specificationsConversion" target="_BLANK"></a>) en fonction des <strong class="specialG">types</strong> des arguments Ã  afficher. </p>
  </div><!-- nobullet -->

  <ol class="questions">
    <li> Tester d'abord ce programme dans l'environnement <strong class="OnlineGDB">OnlineGDB</strong> puis avecÂ <strong class="specialN">GCC</strong> sous <strong class="specialLB">Linux</strong>. </li>

    <li> Moyennant <strong>quelques modifications</strong> sur les spÃ©cifications de conversion, tester ce programme sousÂ <strong class="specialLB">Windows</strong> avec la chaÃ®ne de compilationÂ <strong class="specialN">MinGW</strong>. Que constateâ€‘tâ€‘onÂ ? </li>

    <li> *Â Dans le mÃªme esprit, avec la chaÃ®ne de compilationÂ <strong>GCC</strong> sous <strong class="specialLB">Linux</strong> (et non pas sous <em class="mark">OnlineGDB</em>), coder un programme qui affiche les limites d'encodage des <strong class="defin">types dÃ©cimaux standards</strong> (<code class="prettyprint lang-c">float</code>, <code class="prettyprint lang-c">double</code>, <code class="prettyprint lang-c">long double</code>), en utilisant les <strong>pseudoâ€‘constantes</strong> dÃ©finies dans le fichier d'enâ€‘tÃªteÂ <code class="filename">float.h</code>  de la bibliothÃ¨que standard du langageÂ <strong>C</strong> (cf.Â chap.Â C3â€‘VÂ <a class="cours" href="Cc3-5_typesFlottants.html#caracteristiques" target="_BLANK"></a>). Avec les <strong class="specialDR">spÃ©cifications de conversion</strong> adaptÃ©es aux types flottants (cf.Â chap.Â C3â€‘VÂ <a class="cours" href="Cc3-5_typesFlottants.html#specificationsConversion" target="_BLANK"></a>), on doit obtenir une exÃ©cution produisant en sortie standard l'affichage ciâ€‘dessous. </li>

<!---------- ne pas indenter ---------->
<pre class="displayDark">
  TYPE DESCRIPTOR |   DENORM. MIN. VALUE |   NORM. MIN. VALUE |   MAX. VALUE 
            float |              1.4e-45 |            1.2e-38 |      3.4e+38 
           double |             4.9e-324 |           2.2e-308 |     1.8e+308 
      long double |            3.6e-4951 |          3.4e-4932 |    1.2e+4932 
</pre>
<!---------- ne pas indenter ---------->

    <div class="nobullet"> Tenter de compiler dans l'environnement <strong class="OnlineGDB">OnlineGDB</strong> et sous <strong class="specialLB">Windows</strong>. Que se passeâ€‘tâ€‘ilÂ ? </div>

  </ol><!-- questions -->


  <li id="exo2"> <em class="bold">GÃ©nÃ©ration de nombres alÃ©atoires et statistiques</em> </li>

  <div class="nobullet" style="display: inline-block;"> 
    <img class="top-right" src="../img/de6faces.png" width="150px">
  <p> On souhaite tester la <strong class="pros">qualitÃ©</strong> du <strong class="title">gÃ©nÃ©rateur de nombres pseudoâ€‘alÃ©atoires</strong> employÃ© par un ordinateur. Pour cela, on simule un grand nombre de lancers d'unÂ <strong class="specialO">dÃ© Ã Â 6 faces</strong> (<em class="english">sixâ€‘sided dice</em> â€“Â ou <em class="english">die</em>) et on compare les <strong class="defin">paramÃ¨tres statistiques</strong> de l'ensemble des rÃ©sultats obtenus avec les valeurs des grandeurs correspondantes dans la <strong class="defin">thÃ©orie des probabilitÃ©</strong>, sachant qu'un dÃ© supposÃ© parfait suit une <strong class="specialO">loi uniforme discrÃ¨te</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Loi_uniforme_discrÃ¨te" target="_BLANK">W</a>. </p> 
  </div><!-- nobullet -->

  <div class="consignes" style="margin-left: 0.5em;"> 
  <p class="consigne"> On dÃ©clarera une <strong class="title">constante</strong> <code class="cmd">nbOfRolls</code> pour coder le <strong>nombre de lancers</strong> du dÃ© et on lui donnera successivement les valeurs <code class="prettyprint lang-c">10</code>, <code class="prettyprint lang-c">1000</code> et <code class="prettyprint lang-c">1000000</code> pour tester le programme. </p>
  </div><!-- consignes -->

	<ol class="questions">
    <li> Coder un programme qui <strong>simule</strong> <code class="cmd">nbOfRolls</code> lancers du dÃ© (Ã  l'aide de la fonctionÂ <code class="prettyprint lang-c">rand</code> â€“Â cf.Â chap.Â C3â€‘IIÂ <a class="cours" href="Cc3-2_typesEntiers.html#fonctionRand" target="_BLANK"></a>), qui <strong>calcule</strong> la <strong class="defin">moyenne statistique</strong> des rÃ©sultats obtenus et qui <strong>compare</strong> (calcule la diffÃ©rence) avec l'<strong class="defin">espÃ©rance mathÃ©matique</strong> pour une telle expÃ©rience â€“Â cf.Â les propriÃ©tÃ©s de la loi uniforme discrÃ¨te donnÃ©es par le lien supra. </li>

    <div class="nobullet"> Ce programme devrait fournir une <strong>sortie standard</strong> de la formeÂ :  </div>

<!---------- ne pas indenter ---------->
<pre class="displayDark">
>>>>> Random number generation test program <<<<<
Number of rolls:  1000
--------------------------------------
Statistical mean: 3.496
Math expectation: 3.5
Gap:              -0.004
</pre>
<!---------- ne pas indenter ---------->

  	<li> Au programme prÃ©cÃ©dent, ajouter le calcul de l'<strong class="defin">Ã©cartâ€‘type</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Ã©cart_type" target="_BLANK">W</a> des rÃ©sultats obtenus par rapport Ã  la moyenne thÃ©orique (espÃ©rance mathÃ©matique). Calculer la diffÃ©rence avec la <strong class="defin">racine carrÃ©e de la variance</strong>.  </li>

    <div class="nobullet"> Ce calcul devrait fournir une <strong>sortie standard</strong> supplÃ©mentaire de la formeÂ :  </div>

<!---------- ne pas indenter ---------->
<pre class="displayDark">
--------------------------------------
Standard deviation:   1.76182
Variance square root: 1.70783
Gap:                  0.0539921
</pre>
<!---------- ne pas indenter ---------->    

  	<li> Au programme prÃ©cÃ©dent, ajouter un calcul du <strong class="warning">dÃ©sÃ©quilibre</strong> de la population des lancers par rapport Ã  la valeur thÃ©orique de la <strong class="defin">mÃ©diane</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/MÃ©diane_(statistiques)" target="_BLANK">W</a>, c'estâ€‘Ã â€‘dire la diffÃ©rence entre le nombre de valeurs infÃ©rieures et le nombre de valeurs supÃ©rieures Ã  la valeur thÃ©orique de la mÃ©diane, rapportÃ©e au nombre de lancers. </li>

    <div class="nobullet"> Ce calcul devrait fournir une <strong>sortie standard</strong> supplÃ©mentaire de la formeÂ :  </div>

<!---------- ne pas indenter ---------->
<pre class="displayDark">
--------------------------------------
Median unbalance: -0.8 % (expected 0 %)
</pre>
<!---------- ne pas indenter ---------->    

	</ol><!-- questions -->


<li id="exo3"> <em class="bold"> Calculateur d'adressesÂ <em class="sigle">IP</em>v4 </em> </li>

<div class="nobullet" style="display: inline-block;"> 
  <img class="top-right" src="../img/calculateurAdressesIP.png" width="450px">
<p> On souhaite coder un <strong class="title">calculateur d'adressesÂ <em class="sigle">IP</em>v4</strong> Ã  l'instar de ceux que l'on peut trouver sur l'InternetÂ <a class="external" href="https://cric.grenoble.cnrs.fr/Administrateurs/Outils/CalculMasque/" target="_BLANK"></a> (cf. la capture d'Ã©cran ciâ€‘contre). Ã€ partir d'une <strong>adresse saisie</strong> par l'utilisateur en <strong class="defin">notation dÃ©cimale pointÃ©eÂ <em class="sigle">CIDR</em></strong>Â (cf.Â chap.Â R1â€‘IIIÂ <a class="previous" href="../../moduleR/R1-Generalites/Rc1-3_adressage.html#CIDR" target="_BLANK">R</a>), c'estâ€‘Ã â€‘dire de la formeÂ : <br>
<span class="inline">
  <code class="displayDark">â–¯â–¯â–¯.â–¯â–¯â–¯.â–¯â–¯â–¯.â–¯â–¯â–¯/â–¯â–¯</code>
</span> <br>
le programme doit dÃ©terminer la <strong>valeur entiÃ¨re</strong> de cette adresseÂ <strong><em class="sigle">IP</em></strong> puis calculer toutes les adresses nÃ©cessaires en <strong>notation dÃ©cimale pointÃ©e</strong>Â : </p>
<ul>
  <li> le masque du rÃ©seau,  </li>

  <li> l'adresse du rÃ©seau, </li>

  <li> la premiÃ¨re adresse de machine, </li>

  <li> la derniÃ¨re adresse de machine, </li>

  <li> l'adresse de diffusion gÃ©nÃ©rale (<em class="english">broadcast</em>), </li>

  <li> et le nombre total d'adresses de machines qu'on peut attribuer sur ce rÃ©seau. </li>
</ul>
<p> Pour tout rappel sur ces notions, on peut se reporter au chapitreÂ R1â€‘IIIÂ <a class="cours" href="../../moduleR/R1-Generalites/Rc1-3_adressage.html#IPv4" target="_BLANK">R</a>. </p> 

<p> On peut tester le <strong class="pros">bon fonctionnement</strong> du programme avec des adresses diverses en comparant les rÃ©sultats avec ceux obtenus par un <strong>calculateur en ligne</strong> comme celui dont le lien est donnÃ© supra.  </p>
</div><!-- nobullet -->

<div class="consignes" style="margin-left: 0.5em;"><p class="consignes"></p>
  <ul>
    <li> LesÂ cinqÂ <strong class="title">composantes</strong> de l'adresse saisie par l'utilisateur seront rÃ©cupÃ©rÃ©es via la fonctionÂ <code class="prettyprint lang-c">scanf</code> sous forme d'octets, c'estâ€‘Ã â€‘dire de variables de type <code class="prettyprint lang-c">uint8_t</code> dÃ©clarÃ©es respectivement <code class="prettyprint lang-c">ipByte3</code>, <code class="prettyprint lang-c">ipByte2</code>, <code class="prettyprint lang-c">ipByte1</code>, <code class="prettyprint lang-c">ipByte0</code> par ordre de poids dÃ©croissants etÂ <code class="prettyprint lang-c">ipMask</code> pour la valeurÂ <strong><em class="sigle">CIDR</em></strong> du masque. Il faut employer les <strong class="specialDR">spÃ©cifications de conversion</strong> appropriÃ©es (cf.Â chap.Â C2-VIÂ <a class="previous" href="../C2-ElementsLangage/Cc2-6_entreesSortiesStandards.html#specifConvScanf" target="_BLANK"></a>). </li>

    <li> Ã€ partir des octets de l'adresse saisie, lesÂ sixÂ <strong class="title">adresses</strong> Ã  dÃ©terminer seront calculÃ©es dans des variables de type <code class="prettyprint lang-c">uint32_t</code> respectivement dÃ©clarÃ©es <code class="prettyprint lang-c">hostIPaddress</code>, <code class="prettyprint lang-c">netIPmask</code>, <code class="prettyprint lang-c">netIPaddress</code>, <code class="prettyprint lang-c">firstIPaddress</code>, <code class="prettyprint lang-c">lastIPaddress</code> et <code class="prettyprint lang-c">broadcastIPaddress</code>. </li>

    <div class="nobullet"> Les <strong class="title">calculs d'adresses</strong> peuvent Ãªtre codÃ©s Â«Â facilementÂ Â» Ã  l'aide des opÃ©rateurs logiques <strong>bits Ã  bits</strong> (cf.Â chap.Â C3â€‘IIIÂ <a class="cours" href="Cc3-3_typesBooleens.html#bitwizeOperators" target="_BLANK"></a>) et des opÃ©rateurs de <strong>dÃ©calage de bits</strong> (cf.Â chap.Â C3â€‘IIIÂ <a class="cours" href="Cc3-3_typesBooleens.html#bitShiftOperators" target="_BLANK"></a>). </div>
  </ul>

</div><!-- consignes -->


<li id="exo4"> <em class="bold"> Encodage de caractÃ¨res <em class="mark">Unicode</em> enÂ <em class="sigle">UTFâ€‘8</em> </em> </li>

<div class="nobullet" style="display: inline-block;"> 
  <img class="top-right" src="../img/martine-ecrit-en-utf-8.jpg" width="250px">

<p> On souhaite coder un programme qui, <strong>en boucle</strong>, dÃ©termine l'<strong class="title">encodageÂ <em class="sigle">UTFâ€‘8</em></strong> (cf.Â chap.Â C3â€‘IXÂ <a class="cours" href="Cc3-9_typesCaracteresEtendus.html#formatUTF-8" target="_BLANK"></a>) d'un caractÃ¨re Ã  partir de son numÃ©ro â€“Â ou <strong>point de code hexadÃ©cimal</strong>Â â€“ dans le catalogue <strong class="defin">Unicode</strong> (cf.Â chap.Â C3â€‘IXÂ <a class="cours" href="Cc3-9_typesCaracteresEtendus.html#UCS" target="_BLANK"></a>), saisi par l'utilisateur. On demande <strong class="specialLB">deux formats d'affichage</strong> des octets du codeÂ <strong><em class="sigle">UTFâ€‘8</em></strong>Â :  </p>

<ul>
  <li> en <strong>notation hexadÃ©cimale</strong>Â ;  </li>

  <li> sous forme de <strong>caractÃ¨resÂ <em class="sigle">ASCII</em> Ã©tendus</strong> dans la page de codeÂ 1252 (cf.Â chap.Â C3â€‘VIIIÂ <a class="cours" href="Cc3-8_typesCaracteres.html#windowsCP" target="_BLANK"></a>), comme sur l'affiche parodique ciâ€‘contre oÃ¹ le caractÃ¨re attenduÂ Â«Â <em class="bold">Ã©</em>Â Â» apparaÃ®t sous forme de la sÃ©quence d'octets <code class="filename">ÃƒÂ©</code> comme cela peut se produire lors d'un transcodage inverse mal choisi.</li>
</ul>

<p> <em class="remark">Attention</em>Â : le programme est Ã  compiler sur un PCÂ <em class="mark">Windows</em> avec la chaÃ®ne de compilationÂ <strong>MinGW</strong>, soit dans un terminal avec la commandeÂ <code>gcc</code>, soit dans un <em class="sigle">IDE</em> comme <strong class="Codeblocks">Code::Blocks</strong>, mais <strong class="warning">pas</strong> dans un environnement de programmation en ligne. </p>

<p> Les <strong class="pros">tests de bon fonctionnement</strong> seront effectuÃ©s successivement pour les caractÃ¨res listÃ©s dans le tableau ciâ€‘dessous. </p>

<div style="overflow-x: auto; margin: 0.5em; margin-right: 0em;">
<table style="margin: 0em">
  <tr>
    <th style="text-align: right"> Glyphe </th> 
    <th> A </th>
    <th> Ã© </th>
    <th> â‚¿ </th>
    <th> ğŸ˜ˆ </th>
  </tr>
  <tr> 
    <th style="text-align: right"> Point de code (<code>0x</code>) </th>
    <td style="text-align: center"> U+41 </td>
    <td style="text-align: center"> U+E9 </td>
    <td style="text-align: center"> U+20BF </td>
    <td style="text-align: center"> U+1F608 </td>
  </tr>
  <tr>
    <th style="text-align: right"> Code <em class="sigle">UTF-8</em> (<code>0x</code>) </th>
    <td style="text-align: center"> <code class="cmd">41</code> </td>
    <td style="text-align: center"> <code class="cmd">C3 A9</code> </td>
    <td style="text-align: center"> <code class="cmd">E2 82 BF</code> </td>
    <td style="text-align: center"> <code class="cmd">F0 9F 98 88</code> </td>
  </tr>
  <tr>
    <th style="text-align: right"> Code <em class="sigle">UTF-8</em> (<em class="sigle">ASCII CP1252</em> ) </th>
    <td style="text-align: center"> <code class="filename">Â A</code> </td>
    <td style="text-align: center"> <code class="filename">Â ÃƒÂ Â Â©</code> </td>
    <td style="text-align: center"> <code class="filename">Â Ã¢Â Â â€šÂ Â Â¿</code> </td>
    <td style="text-align: center"> <code class="filename">Â Ã°Â Â Å¸Â Â ËœÂ Â Â Ë†</code> </td>
  </tr>
</table>
</div><!-- overflow -->  
</div><!-- nobullet -->

<div class="consignes" style="margin-left: 0.5em;"><p class="consignes"></p>
  <ul>
    <li> Le <strong>point de code</strong> <strong class="title">Unicode</strong> saisi par l'utilisateur sera enregistrÃ© dans une variable dÃ©clarÃ©e <code class="prettyprint lang-c">unicodePoint</code> de type <code class="prettyprint lang-c">uint32_t</code>. </li>

    <li> Le ou les octets du <strong>code</strong> <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> Ã  dÃ©terminer seront respectivement mÃ©morisÃ©s dans des variables de type <code class="prettyprint lang-c">uint8_t</code> dÃ©clarÃ©es <code class="prettyprint lang-c">utf8byte0</code>, <code class="prettyprint lang-c">utf8byte1</code>, <code class="prettyprint lang-c">utf8byte2</code> et <code class="prettyprint lang-c">utf8byte3</code>, respectivement dans l'ordre de leur poids dans le code. </li>

    <li> Pour faciliter le codage des <strong class="title">opÃ©rations sur les bits</strong> de ces octets, on pourra copierâ€‘coller en dÃ©but de programme le code source des <strong>macro-commandes</strong> <code class="prettyprint lang-c">bitRead</code>, <code class="prettyprint lang-c">bitSet</code>, <code class="prettyprint lang-c">bitClear</code> et <code class="prettyprint lang-c">bitWrite</code> issu du fichier d'enâ€‘tÃªte de bibliothÃ¨que <code class="filename">Arduino.h</code>Â <a class="external" href="https://github.com/arduino/ArduinoCore-avr/blob/master/cores/arduino/Arduino.h" target="_BLANK">G</a>. </li>
  </ul>
</div><!-- consignes -->


<li id="exo5"> <em class="bold"> Simulation de la fonction de transfert du <em class="sigle">CAN</em> d'une carteÂ <strong class="Arduino">ArduinoÂ Uno</strong> </em> </li>

<div class="nobullet" style="display: inline-block;"> 
  <img class="top-right" src="../img/CANcourbeExoC3.png" width="450px">
<p> En thÃ©orie, le <strong class="title">convertisseur analogique numÃ©rique</strong> (<strong><em class="sigle">CAN</em></strong>) du microcontrÃ´leur embarquÃ© sur une carteÂ <strong class="Arduino">ArduinoÂ Uno</strong> opÃ¨re une conversion <strong>linÃ©aire centrÃ©e</strong> unipolaire. Ã€ pleine Ã©chelle, sa <strong class="defin">fonction de transfert</strong> admet donc une courbe reprÃ©sentative dite Â«Â <strong>en escalier</strong>Â Â», avec des marches de longueur constante sauf la premiÃ¨re et la derniÃ¨re (cf.Â la figure ciâ€‘contre et le chap.Â C3â€‘VIIÂ <a class="cours" href="Cc3-7_entreesSortiesAnalogiques.html#fonctionTransfert" target="_BLANK"></a> pour plus de dÃ©tails). </p>

<p>  On souhaite coder un programme de <strong class="title">simulation</strong> de cette fonction de transfert pour pouvoir ensuite <strong class="title">tester</strong> diverses <strong class="defin">fonctions de mise Ã  l'Ã©chelle</strong> (par exemple, celle utilisÃ©e pour un bargraphe). </p>
</div><!-- nobullet -->


<div class="consignes" style="margin-left: 0.5em;">
<p class="consigne"> On dÃ©clarera au dÃ©but de la fonction <code class="prettyprint lang-c">main</code> des <strong>constantes</strong> mÃ©morisant les <strong class="defin">principales caractÃ©ristiques</strong> duÂ <strong><em class="sigle">CAN</em></strong>Â : </p>
<ul>
  <li> <code class="prettyprint lang-c">maxVoltage</code> pour la valeur maximale sur l'Ã©chelle de la tension entrÃ©e (5Â V)Â ;  </li>

  <li> <code class="prettyprint lang-c">maxNumber</code> pour la valeur maximale de l'excursion du nombre en sortie (1023)Â ;  </li>

  <li> <code class="prettyprint lang-c">quantum</code> pour le quantum de conversion, dÃ©fini en fonction des deux constantes prÃ©cÃ©dentes (cf.Â cours). </li>
</ul>
</div><!-- consignes -->

<ol class="questions">
  <li id="exo5qa"> Coder un programme qui, <strong>en boucle</strong>, calcule la valeur du nombre en sortieÂ <strong class="specialDB">N<sub>s</sub></strong> thÃ©oriquement rendu par la <strong class="title">fonction de transfert</strong> duÂ <em class="sigle">CAN</em> pour une valeur de la tension d'entrÃ©eÂ <strong class="specialR">v<sub>e</sub></strong> saisie par l'utilisateur. On prendra la valeurÂ <code>0</code> comme condition de <strong>fin d'itÃ©ration</strong> de la boucle. </li>

  <div class="nobullet">Tester le <strong class="pros">bon fonctionnement</strong> de ce programme en saisissant les valeurs deÂ <strong class="specialR">v<sub>e</sub></strong> dans le tableau ciâ€‘dessous</strong>Â :  </div>
  
  <div style="overflow-x: auto; margin: 0.5em; margin-right: 0em;">
<table style="margin: 0em">
  <tr>
    <th style="text-align: center"> <strong class="specialR">v<sub>e</sub></strong> </th> 
    <td style="text-align: center"> <code>5</code> </td>
    <td style="text-align: center"> <code>4.990</code> </td>
    <td style="text-align: center"> <code>2.5</code> </td>
    <td style="text-align: center"> <code>1</code> </td> 
    <td style="text-align: center"> <code>0.0025</code> </td> 
    <td style="text-align: center"> <code>0.0024</code> </td>
    <td style="text-align: center"> <code>0</code> </td> 
  </tr>
  <tr> 
    <th style="text-align: center"> <strong class="specialDB">N<sub>s</sub></strong></strong> </th> 
    <td style="text-align: center"> <code>1023</code> </td>
    <td style="text-align: center"> <code>1022</code> </td>
    <td style="text-align: center"> <code>512</code> </td>
    <td style="text-align: center"> <code>205</code> </td>
    <td style="text-align: center"> <code>1</code> </td>
    <td style="text-align: center"> <code>0</code> </td>
    <td style="text-align: center"> <code>0</code> </td>
  </tr>
  </table>
  </div><!-- overflow -->
  
  <li id="exo5qb"> Coder un programme qui dÃ©termine les valeurs de la tension d'entrÃ©e aux <strong>seuils des marches</strong> et la <strong>longueur des marches</strong> de la <strong class="title">courbe en escalier</strong> du <em class="sigle">CAN</em>. Pour celaÂ : <br>
  <ul>
    <li> coder une boucle <code class="prettyprint lang-c">for</code> dont la variable d'incrÃ©mentation simule une tension d'entrÃ©eÂ <strong class="specialR">v<sub>e</sub></strong> croissante par <strong>pas</strong> de <em class="bold">0,0001Â V</em> sur l'intervalle <em class="bold">0Â â€“Â 5Â V</em>Â ; </li>

    <li> dans cette boucle, calculer le <strong>nombre en sortie</strong>Â <strong class="specialDB">N<sub>s</sub></strong> et le comparer avec sa <strong>valeur prÃ©cÃ©dente</strong>Â ; en cas de diffÃ©rence (dÃ©tection d'un seuil), calculer le nombre de <strong>quanta</strong> que reprÃ©sente la tension d'entrÃ©e (ce nombre permet trÃ¨s facilement de dÃ©duire la longueur de la marche prÃ©cÃ©dent le seuil). </li>
  </ul> </li>

  <div class="nobullet"> Pour allÃ©ger l'<strong>affichage</strong>, on ne retiendra que lesÂ 3Â premiÃ¨res et lesÂ 3Â derniÃ¨res marches, conformÃ©ment Ã  la capture d'Ã©cran ciâ€‘dessousÂ : </div>
   
<!---------- ne pas indenter ---------->
<pre class="displayDark">
>>>>> Arduino Uno ADC transfer function simulation <<<<<
  Number  |   Voltage   |   Quanta  
      1   |   0.0025    |      0.5 
      2   |   0.0074    |      1.5 
      3   |   0.0123    |      2.5 
   1021   |   4.9830    |   1020.5 
   1022   |   4.9878    |   1021.5 
   1023   |   4.9927    |   1022.5 
</pre>
<!---------- ne pas indenter ---------->

    <img class="top-right" src="../img/potentiometreGradue.png" width="300px">
  <li id="exo5qc"> Dans le contexte d'implÃ©mentation d'un <strong class="title">bargraphe</strong> (cf.Â TPÂ C3â€‘2Â <a class="next" href="Ctp3-1_bargraphe.html" target="_BLANK"></a>), on souhaite que les <strong class="defin">seuils d'allumage</strong> des led successives sont conformes aux valeurs numÃ©riques du nombre en sortieÂ <strong class="specialDB">N<sub>s</sub></strong> inscrites en noir sur la figure ciâ€‘contre. </li>

  <div class="nobullet"> En reprenant une partie du programme prÃ©cÃ©dent, dans la boucleÂ <code class="prettyprint lang-c">for</code> d'incrÃ©mentation de la tension d'entrÃ©eÂ <strong class="specialR">v<sub>e</sub></strong>Â :  <br>
  <ul>
    <li> calculer Ã  partir deÂ <strong class="specialDB">N<sub>s</sub></strong> le <strong>nombre courant de led Ã  allumer</strong> et mÃ©moriser sa valeur dans une variable dÃ©clarÃ©e <code class="prettyprint lang-c">currentLitLEDnumber</code>Â ; </li>

    <div class="nobullet"> on pourra commencer par utiliser la fonctionÂ <code class="prettyprint lang-c">map</code> (cf.Â chap.Â C2â€‘IVÂ <a class="previous" href="../C2-ElementsLangage/Cc2-4_manipulationDonnees.html#fonctionsMathArduino" target="_BLANK"></a>) en rÃ©cupÃ©rant son code source dans le fichier <code class="filename">WMath.cpp</code>Â <a class="external" href="https://github.com/arduino/ArduinoCore-avr/blob/master/cores/arduino/WMath.cpp" target="_BLANK">G</a>Â ;  </div>

    <div class="nobullet"> si le rÃ©sultat n'est pas conforme aux spÃ©cifications ciâ€‘desssus, on recherchera une <strong>autre solution</strong> en s'inspirant de la fonction de transfert duÂ <em class="sigle">CAN</em> de la carte <em class="mark">Arduino</em>Â ; </div>

    <li> comparer la valeur de <code class="prettyprint lang-c">currentLitLEDnumber</code> avec sa valeur prÃ©cÃ©dente (en utilisant une variable dÃ©clarÃ©e  <code class="prettyprint lang-c">previousLitLEDnumber</code>) pour dÃ©tecter les <strong>seuils d'allumage</strong> des led du bargraphe. </li>
  </ul> 
  </div><!-- nobullet -->

  <div class="nobullet"> On produira une <strong>sortie standard</strong> conforme Ã  la capture d'Ã©cran ciâ€‘dessousÂ : </div>
   
<!---------- ne pas indenter ---------->
<pre class="displayDark">
>>>>> Bargraph transfer function simulation <<<<<
  ADC Number  |   LED  
       64     |    1 
      192     |    2 
      320     |    3 
      448     |    4 
      576     |    5 
      704     |    6 
      832     |    7 
      960     |    8 
</pre>
<!---------- ne pas indenter ---------->
  
  </ol><!-- questions -->

</ol><!-- exercices -->

</section>

</div><!-- #scrollingFrame -->

</div><!-- #mainFrame -->

</body>

</html>
