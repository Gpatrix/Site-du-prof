<!DOCTYPE html>

<html 
  data-module="C"
  data-pagetype="Chapitre"
  data-modulepartnumber="3"
  data-pagenumber="IX"
  data-pageState="OK"
  data-pageheadtitle="CaractÃ¨res larges"
  data-pagefulltitle="Les types de caractÃ¨resÂ larges"
  data-authorname="FranÃ§oisÂ GIRAULT"
  data-authormail="francois.girault@ac-versailles.fr"
  lang="fr">

<script src="../../js/operateData.js"></script>

<!-- The following script MUST be coded here and not anywhere else! -->
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

<head> 
  <meta charset="utf-8">
  <script src="../../js/makeHead.js"></script>
</head>

<body>

<nav id="navPannel" style="display: block">
  <script src="../../js/makeNavPannel.js"></script>
</nav>

<div id="mainFrame">
  
<header class="band">
  <script src="../../js/makeHeader.js"></script>
</header> 

<div id="scrollingFrame">

<footer class="band">
  <script src="../../js/makeFooter.js"></script>
</footer>

<section>

<div id="mainTitle">
  <script src="../../js/makeTitle.js"></script>
</div>



<!-- relecture dÃ©c. 2022 sauf partie 3 (mais OK) -->



<div class="exergue">

<div style="display: inline-block;">
  <img class="top-right" src="../img/emoticones.png" width="500px" style="padding-top: 0.8em;">
<p class="square"> On a vu au chapitreÂ C3â€‘VIIIÂ <a class="previous" href="http://www.lycee-ferry-versailles.fr/snir/ModuleC/C3-Numeration/Cc3-8_typesCaracteresEtendus.html" target="_BLANK"></a> que les <strong class="title">extensions</strong> du <strong class="specialLB">jeuÂ <em class="sigle">ASCII</em> restreint</strong> via des pages de code est <strong class="cons">malcommode</strong>. En effet, pour prendre en charge l'ensemble des caractÃ¨res utilisÃ©s par les <strong>langues asiatiques</strong> ou mÃªme certains <strong>textes multilingues</strong> (par exemple, avec la combinaison franÃ§aisâ€‘russe), ou encore un grand nombre de <strong>symboles graphiques</strong> (Ã©moticÃ´nes), on serait contraint de coder frÃ©quemment des instructions de changement de page de code. </p>
</div><!-- display -->

<div style="display: inline-block"> 
  <img class="top-right" src="../img/logoUnicode.png" width="150px" style="padding-top: 0.2em;">
<p> En 1991, Ã  l'initiative d'une association Ã  but non lucratif appelÃ©e <strong class="defin">Consortium Unicode</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Consortium_Unicode" target="_BLANK">W</a>, le <strong class="title">standard Unicode</strong> a Ã©tÃ© crÃ©e pour constituer le <strong class="specialLB">jeu universel des caractÃ¨res</strong> ditÂ <strong class="specialLB"><em class="sigle">UCS </em></strong> (<em class="english">universal coded character set</em>). Soutenu par les grandes entreprises du secteur (<em class="mark">Apple</em>, <em class="mark">Xerox</em>, <em class="mark">Microsoft</em>, <em class="mark">IBM</em>â€¦), ce standard a fait l'objet d'une <strong>norme internationale</strong>Â <em class="bold"><em class="sigle">ISO/IECÂ 10646</em></em>Â <a class="external" href="https://fr.wikipedia.org/wiki/ISO/CEI_10646" target="_BLANK">W</a> qui a introduit <strong class="specialLB">plusieurs formats d'encodage</strong> nommÃ©s <strong class="specialLB"><em class="sigle">UTF</em></strong> (<em class="english">Unicode transformation format</em>), chacun Ã©tant bien adaptÃ© Ã  divers contextes informatiques. En particulier, le formatÂ <em class="bold"><em class="sigle">UTFâ€‘8</em></em> s'est depuis largement imposÃ©, notamment pour le codage des caractÃ¨res des <strong>pages web</strong> et pour les entrÃ©esâ€‘sorties dans les les systÃ¨me d'exploitation <strong>Linux</strong> ainsi que dans de <strong>nombreux logiciels</strong>.  </p>
</div><!-- expert -->

<p class="square"> Bien sÃ»r, des langages de programmation gÃ©nÃ©ralistes commeÂ <strong class="title">C</strong> etÂ <strong class="title">C++</strong> ont Ã©voluÃ© pour permettre au codeur de manipuler <strong class="defin">toutes les valeurs de caractÃ¨res</strong> <strong class="title">Unicode</strong>. Mais en contreâ€‘partie, les techniques de programmation sont <strong class="warning">plus complexes</strong> que pour les caractÃ¨resÂ <strong><em class="sigle">ASCII</em></strong>, et elles dÃ©pendent du <strong class="specialLB">format d'encodage</strong> adoptÃ©Â : </p>

<ul>
	<li> si le format est Ã  <strong class="specialLB">taille fixe</strong> commeÂ <strong><em class="sigle">UTFâ€‘32</em></strong>, les valeurs de caractÃ¨res peuvent Ãªtre manipulÃ©es comme des donnÃ©es de <strong>types</strong> <strong class="specialG">caractÃ¨res larges</strong>Â ;  </li>

	<li> mais si le format est Ã  <strong class="specialLB">taille variable</strong> commeÂ <strong><em class="sigle">UTFâ€‘8</em></strong> ouÂ <strong><em class="sigle">UTFâ€‘16</em></strong>, les valeurs de caractÃ¨res ne peuvent Ãªtre manipulÃ©es qu'au sein de <strong class="specialO">chaÃ®nes de caractÃ¨res</strong> (simples ou larges), via des algorithmes d'<strong class="specialG">encodage multibyte</strong>, qui seront abordÃ©s seulement au chapitreÂ C5â€‘VIÂ <a class="next" href="../C5-StructuresPointeurs/Cc5-6_chainesCaracteres.html" target="_BLANK"></a>. </li>
</ul>

<p class="square"> Ce cours, qui ne constitue qu'une <strong>introduction</strong> aux <strong class="defin">caractÃ¨res larges</strong>, se donne les <strong class="title">objectifs</strong> suivantsÂ : </p> 

<ul>
	<li> introduire prÃ©alablement le <strong class="specialLB">standard Unicode</strong> â€“Â son <strong>catalogue</strong> et son <strong>espace de codage</strong>Â ; </li>

	<li> prÃ©senter les trois <strong class="specialLB">formats d'encodage</strong>  <em class="bold"><em class="sigle">UTFâ€‘32</em></em>, <em class="bold"><em class="sigle">UTFâ€‘16</em></em> et <em class="bold"><em class="sigle">UTFâ€‘8</em></em>, en dÃ©taillant leurs principes, avantages et inconvÃ©nientsÂ ; </li>

	<li> et enfin d'aborder les <strong class="specialG">types</strong> de <strong class="specialLB">caractÃ¨res larges</strong>, en exposant essentiellementÂ : </li>
  
  <ul>
  	<li> la <strong class="defin">syntaxe de codage</strong> des <strong>valeurs de caractÃ¨res</strong>Â ; </li>

  	<li> les <strong class="defin">opÃ©rations</strong> que l'on peut effectuer sur ces <strong>valeurs</strong>, sachant qu'elles sont trÃ¨s similaires Ã  celles sur les valeur de caractÃ¨res simples (cf.Â chap.Â C3â€‘VIIIÂ <a class="previous" href="../C3-numeration/Cc3-8_typesCaracteres.html#manipCaracteres" target="_BLANK"></a>). </li>
  </ul>
</ul>

</div><!-- exergue -->



















<h2> Le standard <em class="mark">Unicode</em> </h2>



<p> Le <strong class="title">standard Unicode</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Unicode" target="_BLANK">W</a> comporteÂ <strong class="specialLB">3Â aspects</strong>Â : </p>

<ul>
  <li> le <strong>jeu universel des caractÃ¨res</strong> (<strong><em class="sigle">UCS</em></strong>), </li>

  <li> l'<strong>espace de codage</strong> â€“Â ou de <strong>numÃ©rotation</strong>Â â€“Â des caractÃ¨res, </li>

  <li> les diffÃ©rents <strong>formats d'encodage</strong> en mÃ©moire des caractÃ¨res (<strong><em class="sigle">UTFâ€‘32</em></strong>, <strong><em class="sigle">UTFâ€‘16</em></strong> etÂ <strong><em class="sigle">UTFâ€‘8</em></strong>). </li>
</ul>

<p> Les formats d'encodage Ã©tant trÃ¨s techniques, ils seront prÃ©sentÃ©s dans la section suivante qui leur est dÃ©diÃ©e. </p> 



<h3 id="UCS"> Le jeu universel des caractÃ¨re </h3>



<div class="important">
<p> Le <strong class="title">jeu universel des caractÃ¨res</strong> â€“Â ouÂ <strong><em class="sigle">UCS</em></strong> pour <strong>universal coded character set</strong>Â <a class="external" href="https://en.wikipedia.org/wiki/Universal_Coded_Character_Set" target="_BLANK">W</a>, abrÃ©gÃ© Â«Â abusivementÂ Â» par le nom du standard luiâ€‘mÃªme <strong class="title">Unicode</strong>Â â€“ est un <strong class="defin">catalogue informatique</strong> qui rÃ©pertorie dÃ©jÃ  <strong class="pros">plus deÂ 144Â milles caractÃ¨res</strong> (<em class="mark">Unicode</em> versionÂ 14.0.0 â€“Â 2021Â <a class="external" href="http://www.unicode.org/versions/Unicode14.0.0/" target="_BLANK"></a>). </p> 
</div><!-- important -->

<div class="complement">
<p> L'<strong class="title">universalitÃ©</strong> n'est pas un vain mot. L'<strong><em class="sigle">UCS</em></strong> a pour vocation de cataloguerÂ : </p>

<ul>
  <li> <strong class="pros">tous</strong> les <strong class="defin">caractÃ¨res Â«Â lettresÂ Â»</strong> au sens large (c'estâ€‘Ã â€‘dire, aussi les idÃ©ogrammes) permettant d'Ã©crire <strong class="pros">toutes les langues</strong> du monde, qu'elles soient <strong>contemporaines</strong> ou <strong>anciennes</strong>Â ;  </li>

  <li> <strong class="pros">tous</strong> les <strong class="defin">symboles</strong> <strong>mathÃ©matiques</strong>, <strong>graphiques</strong>, <strong>musicaux</strong>, <strong>Ã©moticÃ´nes</strong>, etc. qui sont reconnus par la norme <em class="mark">Unicode</em> (il y a chaque annÃ©e de nouvelles entrÃ©es)Â ; </li>

  <li> <strong class="pros">tous</strong> les <strong class="defin">caractÃ¨res de contrÃ´le</strong> non pourvus de glyphe mais employÃ©s par les systÃ¨mes numÃ©riques (saut de tabulation, de ligne, etc.). </li>
</ul>
</div><!-- complement -->


<p> Pour <strong class="title">consulter l'<em class="sigle">UCS</em></strong> et y rechercher un caractÃ¨re particulier, que ce soit pour une <strong class="defin">opÃ©ration de Â«Â copier/collerÂ Â»</strong> ou pour obtenir ses <strong>caractÃ©ristiques</strong> (point de code, codesÂ <em class="sigle">UTF</em>, etc.), plusieurs moyens existentÂ : </p>  
<ul>
  <li> Il existe des <strong class="specialLB">pages au formatÂ <code>pdf</code></strong>, classifiÃ©es par <strong>familles de langues</strong> ou d'<strong>alphabets</strong>, au lien suivantÂ <a class="external" href="https://www.unicode.org/charts/" target="_BLANK"></a>. </li>

  <li> Il existe Ã©galement des <strong class="specialLB">pages web dynamiques</strong> comme par exemple celleâ€‘ci qui constitue un vÃ©ritable <strong class="pros">catalogue en ligne</strong>, Â <a class="external" href="https://unicode-table.com/fr/" target="_BLANK"></a>. </li>

  <li> On peut aussi recourir Ã  la <strong class="specialLB">table des caractÃ¨res</strong> du <strong>systÃ¨me d'exploitation</strong> d'un poste de travail. Cet utilitaire permet d'avoir une bonne vue d'ensemble des diffÃ©rents blocs de classification et possÃ¨de des fonctions de recherche (cf.Â la capture d'Ã©cran de celle de <em class="mark">Linux Mint</em> ciâ€‘dessous).  </li>

  <img class="top-left" src="../img/tableCaracteres.png" style="max-width: 800px">
</ul>


<h4 id="codePoint"> DÃ©finition d'un caractÃ¨re â€“Â notion de pointÂ deÂ code </h4>


<div class="important">
<p> Dans l'<em class="bold"><em class="sigle">UCS</em></em>, <strong class="title">chaque caractÃ¨re</strong> (cf.Â l'exemple en figure ciâ€‘dessousÂ <a class="external" href="https://unicode-table.com/fr/1F609/" target="_BLANK"></a>) est <strong>dÃ©fini</strong> parÂ : </p>
<div style="display: inline-block">
  <img class="top-right" src="../img/winkingFace1.png" width="300px" style="padding-top: 0.0em;">
<ul>
	<li> son <strong class="defin">nom officiel</strong> dans les principales langues du mondeÂ ; </li>

	<li> son <strong class="specialV">point de code</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Point_de_code" target="_BLANK">W</a>, c'estâ€‘Ã â€‘dire son <strong>numÃ©ro d'ordre</strong> dans le jeu, notÃ© sous <strong>forme hexadÃ©cimale</strong> et prÃ©fixÃ© parÂ <span class="framedSmall" style="background: white"><em class="boldV">U+</em></span>Â ; </li>

	<li> son <strong class="specialY">glyphe</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Glyphe" target="_BLANK">W</a> ou, s'il s'agit d'un caractÃ¨re de contrÃ´le, l'<strong class="specialM">action</strong> qu'il accomplit.  </li>
</ul>
</div><!-- display -->
</div><!-- important -->

<div class="complement" style="display: inline-block">
  <img class="top-right" src="../img/winkingFace3.png" width="300px" style="padding-top: 0.0em;">
<p> Le <strong class="specialY">glyphe</strong> d'un caractÃ¨re <strong>peut diffÃ©rer</strong> selon la police employÃ©e pour l'affichage ou l'impression (cf.Â ciâ€‘contre diffÃ©rents styles de glyphe du caractÃ¨res <em class="mark">Winking face</em>). Il peut Ãªtre source de <strong class="cons">confusion</strong> entre des caractÃ¨res diffÃ©rents mais qui se ressemblent (cf.Â les exemples infra). </p>

<p> En revanche, le <strong class="defin">nom</strong> et surtout son <strong class="specialV">point de code</strong> d'un caractÃ¨re sont l'un et l'autre <strong class="title">uniques</strong>Â ; ils permettent d'<strong class="pros">identifier le caractÃ¨reÂ sans ambiguÃ¯tÃ©</strong>. </p>
</div><!-- complement -->

<div class="exemples">
<p class="exemples"> Pour souligner l'importance de l'<strong class="title">unicitÃ©</strong> du <strong class="specialV">point de code</strong> d'un caractÃ¨re, observons qu'en typographie, il faut <strong class="warning">ne pas confondre</strong>Â : </p>
<ul>
	<li> Â«Â <em class="bold">-</em>Â Â» appelÃ© <strong class="defin">traitÂ d'unionÂ -Â signeÂ moins</strong> (en anglais, <em class="english">hyphenâ€‘minus</em>) dont le <strong class="specialV">point de code</strong> estÂ <em class="boldV">U+002D</em>Â ; outre sa fonction de trait d'union dans les textes, c'est aussi le symbole Â«Â moinsÂ Â» qui est employÃ© en programmation comme opÃ©rateur de soustractionÂ ; </li>

  <div class="expert">
  <li> Â«Â <em class="bold">â€‘</em>Â Â» appelÃ© <strong class="defin">traitÂ d'unionÂ insÃ©cable</strong> (en anglais, <em class="english">nonâ€‘breaking hyphen</em>), dont le <strong class="specialV">point de code</strong> estÂ <em class="boldV">U+2011</em>Â ; contrairement au trait d'union usuel (dont il a pratiquement la mÃªme apparence dans les polices de caractÃ¨res proportionnelles), il interdit aux logiciels de traitement de textes et aux navigateurs de pages web de sÃ©parer par un saut de ligne les deux mots qu'il relieÂ ;  </li>
  </div><!-- expert -->

	<li> Â«Â <em class="bold">âˆ’</em>Â Â» appelÃ© <strong class="defin">signeÂ moins</strong> (en anglais, <em class="english">minus sign</em>), de <strong class="specialV">point de code</strong>Â <em class="boldV">U+2212</em>Â ; c'est le symbole Â«Â moinsÂ Â» qui est employÃ© en Ã©dition mathÃ©matiqueÂ ; il est plus fin et plus large que le trait d'union, mais un Å“il inexpÃ©rimentÃ© pourrait ne pas percevoir cette diffÃ©rence. </li>
  
  <div class="expert">
  <li> Â«Â <em class="bold">â€“</em>Â Â» appelÃ© <strong class="defin">tiret demiâ€‘cadratin</strong>Â  ou <strong class="defin">tiret moyen</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Tiret" target="_BLANK">W</a> (en anglais, <em class="english">En dash</em>), de <strong class="specialV">point de code</strong>Â <em class="boldV">U+2013</em>Â ; c'est le symbole de ponctuation qui est trÃ¨s employÃ© en typographie franÃ§aise, notamment les rÃ©pliques dans les dialogues ou pour dÃ©limiter les proposition incisesÂ <a class="external" href="https://fr.wikipedia.org/wiki/Proposition_incise" target="_BLANK">W</a> dans un texte. </li>
  </div><!-- expert -->
</ul>
<p> On voit bien Ã  travers ces exemples le <strong class="cons">risque Ã©levÃ© de confusion</strong> pour un dÃ©butant qui se contenterait d'identifier les caractÃ¨res par leur glyphe ou par une lecture approximative de leur nom. </p>
</div><!-- exemples -->



<h3> L'espace de codage </h3>



<div class="important">
<p> Le standard <strong class="defin">Unicode</strong> se rÃ©serve un <strong class="title">espace de codage</strong> qui va des <strong class="specialV">points de code</strong>Â <em class="boldV">U+000000</em> Ã Â <em class="boldV">U+10FFFF</em>. </p>
</div><!-- important -->

<div class="complement">
<p> Cet espace compte donc <strong class="defin">plus d'un million</strong> de <strong class="specialV">points de code</strong>, ce qui semble a priori <strong class="pros">trÃ¨s largement suffisant</strong> pour tous les besoins actuels et Ã  venir, puisqu'Ã  l'heure actuelle, il y a <strong>moins deÂ 150&#8239;000 caractÃ¨res</strong> dans l'<strong><em class="sigle">UCS</em></strong> â€“Â cf.Â supraÂ <a class="supra" href="Cc3-9_typesCaracteresEtendus.html#UCS"></a>. </p>
</div><!-- complement -->

<div class="remarques">
<p class="remarque"> Les <strong class="specialV">points de codes</strong> ne sont <strong class="warning">pas</strong> des <strong>codes informatiques</strong> Ã  proprement parler, ce sont <strong class="cons">seulement des numÃ©ros</strong>. NÃ©anmoins, ils constituent une base pertinente pour les diffÃ©rents formats d'encodage â€“Â en particulier pourÂ l'<strong><em class="sigle">UTFâ€‘32</em></strong>, cf.Â infraÂ <a class="infra" href="Cc3-9_typesCaracteresEtendus.html#formatUTF-32"></a>. </p>
</div><!-- remarque -->


<h4 id="plansUnicode"> Division en plans </h4>


<div class="important">
<p> L'<strong class="title">espace de codage</strong> est divisÃ© enÂ <strong class="specialLB">17Â plans</strong>, chacun comptantÂ <strong>65&#8239;536Â points de code</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Table_des_caractÃ¨res_Unicode" target="_BLANK">W</a>. </p>
</div><!-- important -->

<div class="complement">
<ul>
  <li> Le <strong class="specialLB">planÂ 0</strong>, appelÃ© <strong class="defin">plan multilingue de base</strong> â€“Â ouÂ <strong class="defin"><em class="sigle">BMP</em></strong> pour <strong>basic multilingual plane</strong>Â <a class="external" href="https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane" target="_BLANK">W</a>Â â€“ va des points codesÂ <em class="bold" style="color: darkviolet">U+000000</em> Ã Â <em class="bold" style="color: darkviolet">U+00FFFF</em>. Chaque caractÃ¨re de ce plan peut donc Ãªtre encodÃ© <strong class="pros">sur seulement deuxÂ octets</strong>. </li>
  
  <div class="expert">
  <div class="nobullet"> Sur la figure ciâ€‘dessous (source <em>Wikipedia</em>Â <a class="external" href="https://en.wikipedia.org/wiki/Plane_(Unicode)#/media/File:Roadmap_to_Unicode_BMP.svg" target="_BLANK">W</a>), chaque carrÃ© numÃ©rotÃ© (en hexadÃ©cimal) reprÃ©sente un <strong>sousâ€‘ensemble deÂ 256Â points de code</strong>, dont le premier, coloriÃ© en noir (nÂ°Â <strong><em class="sigle">00</em></strong>) contient les blocs dit <strong class="defin">Latin de base</strong> et <strong class="defin">SupplÃ©ment Latinâ€‘1</strong>. Ils correspondent au <strong>jeuÂ <em class="sigle">ASCII</em> restreint</strong> et l'extensionÂ <strong><em class="sigle">ISO/CEIÂ 8859â€‘1</em></strong> (cf.Â chap.Â C3â€‘VIIIÂ <a class="previous" href="Cc3-8_typesCaracteres.html#jeuxEtendusASCII" target="_BLANK"></a>). </div>

  <div class="nobullet"> LesÂ 256Â carrÃ©s forment donc bien 256Â Ã—Â 256Â = 65&#8239;536Â points de code. </div>
    <img class="top-right" src="../img/UnicodeBMP.png" width="500px" style="padding-top: 0.5em;">

  <ul>
    <li> LeÂ <strong class="specialLB"><em class="sigle">BMP</em></strong> regroupe la totalitÃ© de de tous les caractÃ¨res de <strong class="pros">presque toutes les langues contemporaines</strong>, Ã  l'exception des trois principales langues asiatiques â€“Â <em>chinois</em>, <em>japonais</em> et <em>corÃ©en</em>, formant le <strong>groupeÂ <em class="sigle">CJK</em></strong>Â <a class="external" href="https://en.wikipedia.org/wiki/CJK_characters" target="_BLANK">W</a>Â â€“ qui ne sont que <strong class="cons">partiellement incluses</strong> (tout en y occupant la majoritÃ© du plan â€“Â cf.Â les carrÃ©s de couleurÂ saumonÂ <span style="color: coral">â– </span>). </li>

    <li> LeÂ <strong class="specialLB"><em class="sigle">BMP</em></strong> comporte Ã©galement de <strong>trÃ¨s nombreux symboles</strong> (numÃ©ros, flÃ¨ches, symboles mathÃ©matiques, pictogrammes, etc. â€“Â cf.Â les carrÃ©s de couleurÂ magentaÂ <span style="color: magenta">â– </span>). </li>
  </ul>
  </div><!-- expert -->

  <li> Le <strong class="	specialLB">planÂ 1</strong>, dit <strong class="defin">plan multilingue supplÃ©mentaire</strong> â€“Â ouÂ <strong class="defin"><em class="sigle">SMP</em></strong> pour <strong>supplementary multilingual plane</strong>Â <a class="external" href="https://en.wikipedia.org/wiki/Plane_(Unicode)#Supplementary_Multilingual_Plane" target="_BLANK">W</a>Â â€“ va des points codesÂ <em class="bold" style="color: darkviolet">U+010000</em> Ã Â <em class="bold" style="color: darkviolet">U+01FFFF</em>. Il regroupe les caractÃ¨res des <strong>langues anciennes</strong>, ainsi que des <strong>symboles d'usage contemporain</strong> (dominos, cartes Ã  jouer, Ã©moticÃ´nes, etc.) </li>

  <li> Les <strong class="specialLB">plansÂ 2Â &Â 3</strong> sont respectivement ditsÂ : </li>
  <ul>
    <li> <strong class="defin">plan sinographique complÃ©mentaire</strong> â€“Â ouÂ <strong><em class="sigle">SIP</em></strong> pour <strong>supplementary ideographic plane</strong> â€“Â il va des points codesÂ <em class="bold" style="color: darkviolet">U+020000</em> Ã Â <em class="bold" style="color: darkviolet">U+02FFFF</em>Â ;  </li>
  
    <li> <strong class="defin">plan sinographique ternaire</strong> â€“Â ouÂ <strong><em class="sigle">TIP</em></strong> pour <strong>tertiary ideographic plane</strong> â€“Â il va des points codesÂ <em class="bold" style="color: darkviolet">U+030000</em> Ã Â <em class="bold" style="color: darkviolet">U+03FFFF</em>Â ; </li>
  </ul>
  <div class="nobullet"> Ces deux plans sont consacrÃ©s aux <strong>autres caractÃ¨res</strong> des langues du groupeÂ <strong><em class="sigle">CJK</em></strong> qui, faute de place, ne rentrent <strong class="cons">pas dans leÂ <em class="sigle">BMP</em></strong>. </div>

  <li> Les <strong class="specialLB">plansÂ 4Â Ã Â 16</strong>Â sont soit <strong>non affectÃ©s</strong>, soit <strong>spÃ©ciaux</strong>, soit <strong>privÃ©s</strong>. </li>

  <img class="top-left" src="../img/UnicodePlanes.png">
</ul>
</div><!-- complement -->


<h4> Division d'un plan en blocs Unicode</h4>


<div class="important">
<p> Ã€ l'exception des plans d'usage privÃ© (nÂºÂ 15Â &Â 16), tout plan de l'<strong><em class="sigle">UCS</em></strong> se divise luiâ€‘mÃªme en <strong class="title">blocs</strong> dits <strong class="title">Unicode</strong> pour <strong class="pros">faciliter le repÃ©rage</strong> des caractÃ¨res. </p>

<p> Un tel <strong class="title">bloc Unicode</strong>Â <a class="external" href="https://en.wikipedia.org/wiki/Unicode_block" target="_BLANK">W</a> est un <strong class="defin">ensemble de points de codes successifs</strong> identifiÃ© par un <strong>nom</strong> et formant un <strong class="pros">tout cohÃ©rent</strong> au regard d'un usage spÃ©cifique â€“Â typiquement, un jeu de caractÃ¨res alphabÃ©tiques particulier (grec, cyrillique, etc.).  </p>
</div><!-- important -->

<div class="exemples">
<p class="exemples"> Au dÃ©but duÂ <strong><em class="sigle">BMP</em></strong>, on trouve les <strong class="title">blocs Unicode</strong> suivantsÂ :  </p>
<ul>
  <li> <strong class="specialLB">Commandes CO et Latin de base</strong>Â <a class="external" href="https://unicode-table.com/fr/blocks/basic-latin/" target="_BLANK"></a> (codesÂ U+0000 Ã Â U+007F), Ã©quivalent au <strong>jeu <em class="sigle">ASCII</em>Â restreint</strong>Â ; </li>

  <li> <strong class="specialLB">Commandes C1 et supplÃ©ment Latinâ€‘1</strong>Â <a class="external" href="https://unicode-table.com/fr/blocks/latin-1-supplement/" target="_BLANK"></a> (codesÂ U+0080 Ã Â U+00FF), Ã©quivalent Ã  la partie Ã©tendue du <strong>jeu <em class="sigle">ISOâ€‘8859â€‘1</em></strong>Â ; </li>

  <li> <strong class="specialLB">Latin Ã©tenduÂ A</strong>Â <a class="external" href="https://unicode-table.com/fr/blocks/latin-extended-a/" target="_BLANK"></a> (codesÂ U+0100 Ã Â U+017F) et <strong class="specialLB">Latin Ã©tenduÂ B</strong>Â <a class="external" href="https://unicode-table.com/fr/blocks/latin-extended-b/" target="_BLANK"></a> (codesÂ U+0180 Ã Â U+024F) viennent complÃ©ter le bloc prÃ©cÃ©dent pour couvrir l'<strong>alphabet latin</strong> Â â€“ on y trouve notamment les ligaturesÂ Â«Â <em class="bold">Å’</em>Â Â» et Â«Â <em class="bold">Å“</em>Â Â»Â ; </li>

  <li> <strong class="specialLB">SupplÃ©ment pour l'alphabet phonÃ©tique international</strong>Â <a class="external" href="https://unicode-table.com/fr/blocks/ipa-extensions/" target="_BLANK"></a> (codesÂ U+0250 Ã Â U+02AF)Â ; </li>

  <li> etc. </li>
</ul>

</div><!-- complement -->



<div class="expert">
<p> La <strong class="title">taille d'un bloc Unicode</strong> n'est <strong class="defin">pas uniforme</strong>, elle varie de quelques dizaines Ã  plusieurs dizaines de milliers, en fonction des regroupements fonctionnels d'attribution des points de code. </p>

<p> La <strong class="title">liste exhaustive</strong> des <strong>blocs Unicodes</strong> peut Ãªtre trouvÃ©e notamment iciÂ <a class="external" href="https://unicode-table.com/fr/blocks/" target="_BLANK"></a> ou lÃ Â <a class="external" href="https://en.wikipedia.org/wiki/Unicode_block#List_of_blocks" target="_BLANK"></a>. </p>
</div><!-- expert -->
























<h2 id="formatsUnicode"> Les formats d'encodage associÃ©s auÂ standardÂ <em class="mark">Unicode</em> </h2>



<div class="important">
<p> Les formatsÂ <strong class="title"><em class="sigle">UTF</em></strong> â€“Â pour <strong class="title">Unicode transformation format</strong>Â â€“ sont des <strong>formats d'encodage</strong> qui <strong class="defin">transforment</strong> des <strong>points de code</strong> du jeu universel des caractÃ¨res en de vÃ©ritables <strong class="defin">codes machines</strong> pour le stockage en mÃ©moire des valeurs de caractÃ¨res. </p>

<p> Il existe Ã  l'heure actuelle <strong class="title">trois principaux formats</strong> â€“Â <strong class="specialLB"><em class="sigle">UTFâ€‘8</em></strong>, <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong> etÂ <strong class="specialLB"><em class="sigle">UTFâ€‘32</em></strong>Â â€“ dont le nombre indiquÃ© en suffixe prÃ©cise la <strong>largeur en bits</strong> de l'<strong class="specialLG">unitÃ© d'encodage</strong> en mÃ©moire du format. </p>
</div><!-- important -->

<!-- 
<div class="complement">
<p> Autres formats: UCSâ€‘2, UCSâ€‘4, UTFâ€‘7 </p>
</div>
-->



<h3 id="formatUTF-32"> Le formatÂ UTFâ€‘32 </h3>



<div class="important">
<p> Le formatÂ <strong class="title"><em class="sigle">UTFâ€‘32</em></strong>Â <a class="external" href="https://en.wikipedia.org/wiki/UTF-32" target="_BLANK">W</a> est Ã  <strong class="defin">taille fixe</strong>Â : chaque <strong>caractÃ¨re</strong> est encodÃ© sur <strong class="pros">une et une seule</strong> <strong class="specialLG">unitÃ© d'encodage</strong> constituÃ©e d'un mot binaire deÂ <strong>32Â bits</strong> (4Â octets). </p>

<div style="display: inline-block">
  <img class="top-right" src="../img/principeUTF-32.png" width="450px" style="padding-top: 0.0em;">
<p> Le <strong class="defin">principe d'encodage</strong> de ce format est <strong class="pros">le plus simple</strong>Â  qui soitÂ : l'unitÃ© d'encodage d'un caractÃ¨re est directement son <strong class="specialV">point de code</strong> dans l'<strong><em class="sigle">UCS</em></strong>, exprimÃ© surÂ <strong>8Â digits hexadÃ©cimaux</strong> (8Â Ã—Â 4Â =Â 32Â bits) â€“Â cf.Â la figure ciâ€‘contre. </p>
</div><!-- display --> 
</div><!-- important -->

<div class="exemples">
<p class="exemple"> Ainsi, l'<strong class="title">Ã©moticÃ´ne</strong>Â ğŸ˜‰ nommÃ© <em class="english">Winking face</em>Â <a class="external" href="https://unicode-table.com/fr/1F609/" target="_BLANK"></a> dont le <strong class="specialV">point de code</strong> estÂ <em class="boldV">U+0001F609</em> est directement encodÃ©Â <code class="cmd">00 01 F6 09</code> au formatÂ <strong class="defin"><em class="sigle">UTFâ€‘32</em></strong>.  </p>
</div><!-- exemple -->

<div class="complement">
<p> La <strong class="pros">simplicitÃ©</strong> du formatÂ <strong class="title"><em class="sigle">UTFâ€‘32</em></strong> se paye par <strong class="warning">coÃ»t mÃ©moire trÃ¨s Ã©levÃ©</strong>. Ainsi, pour un texte en langue europÃ©enne encodable enÂ <strong><em class="sigle">ASCII</em> Ã©tendu</strong> (un octet par caractÃ¨re), l'espace mÃ©moire nÃ©cessaire devient <strong class="cons">4Â fois supÃ©rieur</strong> s'il est encodÃ© en <em class="bold"><em class="sigle">UTFâ€‘32</em></em>. Il en rÃ©sulte que ce format est finalement <strong class="defin">trÃ¨s peu employÃ©</strong>. </p>
</div><!-- complement -->

<div class="exemples">
<p class="exemple"> Pour mesurer l'ampleur du <strong class="title">coÃ»t mÃ©moire du formatÂ <em class="sigle">UTFâ€‘32</em></strong>, comparons l'encodage d'une <strong>chaÃ®ne de caractÃ¨re de styleÂ C</strong> (avec un caractÃ¨reÂ <strong><em class="sigle">NUL</em></strong> ajoutÃ© Ã  la fin), comme par exempleÂ <code class="prettyprint lang-c">"OK"</code>Â : </p>
<ul>
  <li> au formatÂ <strong class="pros"><em class="sigle">ASCII</em></strong>Â : </li>

<!---------- ne pas indenter ---------->
<pre style="font-size: 70%;">
   O        K        \0
-------- -------- -------- 
01001111 01001011 00000000
</pre>
<!---------- ne pas indenter ---------->

  <li> au formatÂ <strong class="cons"><em class="sigle">UTFâ€‘32</em></strong>Â :  </li>

<!---------- ne pas indenter ---------->
<pre style="font-size: 70%;">
               O                                  K                                \0
-------------------------------- --------------------------------- ---------------------------------
00000000000000000000000001001111 000000000000000000000000001001011 000000000000000000000000000000000
</pre>
<!---------- ne pas indenter ---------->

</ul>

</div><!-- exemple -->

<div class="expert">
<p> Plus gÃ©nÃ©ralement, rappelons que l'on peut coder environÂ <strong>4Â milliards de valeurs</strong> surÂ 32Â bits (cf.Â chap.Â IIIâ€‘2Â <a class="previous" href="../C3-numeration/Cc3-2_typesEntiers.html#entiersStandards" target="_BLANK"></a>) alors que l'<strong><em class="sigle">UCS</em></strong> luiâ€‘mÃªme ne compte qu'environÂ <strong>1Â millions de points de code</strong>. Parmi ces points de code, <strong>seulement cent mille</strong> environ sont affectÃ©s Ã  des caractÃ¨res. Le formatÂ <strong><em class="sigle">UTFâ€‘32</em></strong> est donc trÃ¨s largement <strong class="cons">surdimensionnÃ©</strong>. </p>

<p> En rÃ¨gle gÃ©nÃ©rale, le format <strong class="title"><em class="sigle">UTFâ€‘32</em></strong> n'est donc envisagÃ© que pour coder des <strong>fichiers de textes</strong> en <strong class="defin">langues asiatique</strong> ou <strong class="defin">anciennes</strong> comportant une grande majoritÃ© de caractÃ¨res qui nÃ©cessitent chacunÂ 4Â octets d'encodage, quel que soit le format. </p>
</div><!-- expert -->

<div class="remarques"><p class="remarques"></p>
<ol class="littered">
	<li> On pourrait penser pouvoir <strong class="title">Ã©conomiserÂ unÂ octet</strong>, puisqu'un format surÂ 24Â bits (3Â octets) serait en principe suffisant pour encoder le dernier point de codeÂ <em class="boldV">U+10FFFF</em>. NÃ©anmoins, ce format ne serait <strong class="cons">pas compatible</strong> avec les <strong class="warning">contraintes d'alignement</strong> (cf.Â chap.Â C3â€‘IÂ <a class="previous" href="Cc3-1_typesGeneralites.html#typesTailles" target="_BLANK"></a>) des unitÃ©s d'encodage sur la plupart des architectures deÂ machines. </li>

	<li> Avec le formatÂ <strong><em class="sigle">UTFâ€‘32</em></strong>, le code de chaque caractÃ¨res du <strong>plan</strong>Â <strong class="defin"><em class="sigle">BMP</em></strong> commence par <strong class="cons">deux voire troisÂ octets nuls</strong>. Or dans un processus de lecture de bas niveau (octet par octet), les <strong class="title">octets nuls</strong> se confondent avec le <strong>caractÃ¨reÂ <em class="sigle">NUL</em></strong> du jeuÂ <strong><em class="sigle">ASCII</em></strong> qui est souvent employÃ© (notamment en langageÂ <strong>C</strong>) pour marquer les <strong class="specialO">fins de chaÃ®ne</strong>. C'est un <strong class="cons">autre inconvÃ©nient</strong> du formatÂ <strong><em class="sigle">UTFâ€‘32</em></strong>, car sans prÃ©cautions particuliÃ¨res, une telle confusion peut faire Ã©chouer des algorithmes de lecture de bas niveau. </li>
</ol>
</div><!-- remarques -->



<h3 id="formatUTF-16"> Le formatÂ UTFâ€‘16 </h3>



<div class="important">
<p> Le formatÂ <strong class="title"><em class="sigle">UTFâ€‘16</em></strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/UTF-16" target="_BLANK">W</a> est Ã  <strong class="defin">taille variable</strong>Â : </p>

<ul>
  <li> chaque <strong>caractÃ¨re</strong> est encodÃ© surÂ <strong>1Â ouÂ 2</strong>Â <strong class="specialLG">unitÃ©(s) d'encodage</strong>, selon le <strong>plan</strong> de l'<em class="bold"><em class="sigle">UCS</em></em> auquel il appartientÂ ; </li>

  <li> chaque <strong class="specialLG">unitÃ© d'encodage</strong> Ã©tant formÃ©e d'un <strong>mot deÂ 16Â bits</strong>. </li>
</ul>
</div><!-- important -->

<div class="complement">
<p> Le formatÂ <strong class="title"><em class="sigle">UTFâ€‘16</em></strong> est notamment adoptÃ© pour l'encodage des caractÃ¨res parÂ : </p>
<ul>
  <li> lesÂ <strong><em class="sigle">UEFI</em></strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/UEFI" target="_BLANK">W</a> â€“Â <strong>unified extensible firmware interface</strong>, c'estâ€‘Ã â€‘dire les interfaces de firmware des cartesâ€‘mÃ¨res des postes de travailÂ ;   </li>

  <li> les systÃ¨me d'exploitation <strong>Microsoft Windows</strong>Â ; </li>

  <li> divers standards de <strong>langages de programmation</strong> (<em class="mark">Java</em>, <em class="mark">JavaScript</em>, etc.) et certains environnements de programmation (<em class="mark">Qt</em>â€¦).</li>
</ul>

<p> En revanche, <strong class="title"><em class="sigle">UTFâ€‘16</em></strong> n'est quasiment <strong class="defin">pas employÃ© pour les pages web</strong> car statistiquement, il est <strong class="cons">moins efficace</strong> que le formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘8</em></strong> en termes de coÃ»t mÃ©moire global et de vitesse d'affichage des pages. </p>
</div><!-- complement -->


<p> Sans entrer dans les dÃ©tails, le <strong class="title">principe gÃ©nÃ©ral d'encodage</strong> des caractÃ¨res enÂ <strong class="title"><em class="sigle">UTFâ€‘16</em></strong> est le suivantÂ : </p>

<ul>
  <div style="display: inline-block">
    <img class="top-right" src="../img/principeUTF-16-1.png" width="350px" style="padding-top: 0.0em;">
  <li> Les caractÃ¨res duÂ <strong class="specialLB"><em class="sigle">BMP</em></strong> (cf.Â supraÂ <a class="supra" href="Cc3-9_typesCaracteresEtendus.html#plansUnicode"></a>) sont tous identifiÃ©s par un point de code exprimÃ© surÂ <strong>4Â digits hexadÃ©cimaux</strong> (4Â Ã—Â 4Â =Â 32Â bits). Ils sont donc encodÃ©s <strong class="pros">directement</strong> sur <strong class="specialLG">un seul mot</strong> deÂ 16Â bitsÂ (2 octets). </li>
  </div><!-- display -->

  <div class="exemples">
  <p class="exemple"> La <strong class="title">lettreÂ Â«Â <em class="bold">Å’</em>Â Â»</strong> (<em class="mark">ligature capitale O E</em>Â <a class="external" href="https://unicode-table.com/fr/0152/" target="_BLANK"></a>) dont le <strong class="specialV">point de code</strong> estÂ <em class="boldV">U+0152</em> est directement encodÃ©Â <code class="cmd">01 52</code> au formatÂ <strong class="defin"><em class="sigle">UTFâ€‘16</em></strong>.  </p>
  </div><!-- exemple -->
  
  <li> Les caractÃ¨res des <strong class="specialLB">autres plans</strong> sont encodÃ©s de faÃ§on <strong class="warning">plus complexe</strong> sur <strong class="specialLG">deux mots</strong> deÂ 16Â bits en utilisant lesÂ <strong>2048Â points de code rÃ©servÃ©s duÂ <em class="sigle">BMP</em></strong>Â <em class="boldV">U+D800</em> Ã Â <em class="boldV">U+DFF</em> appelÃ©es <strong class="specialLGr">paires de substitution</strong> â€“Â en anglais <strong>surrogate pairs</strong>Â <a class="external" href="https://en.wikipedia.org/wiki/UTF-16#U+D800_to_U+DFFF" target="_BLANK">W</a>. </li>

  <div class="expert">
  <div class="nobullet"> Pour comprendre le <strong class="title">principe d'encodage enÂ <em class="sigle">UTFâ€‘16</em></strong> d'un point de code <strong>hors duÂ <em class="sigle">BMP</em></strong>, il n'est pas possible d'en rester Ã  une dÃ©composition en digits hexadÃ©cimauxÂ ; il faut mener l'<strong class="defin">analyse au niveau binaire</strong>. </div>

  <div class="nobullet"> En premier lieu, on peut faire les observations suivantesÂ : </div>
  <ul>
    <li> Les <strong class="specialV">points de code</strong> <strong class="defin">hors duÂ <em class="sigle">BMP</em></strong> s'Ã©chelonnent deÂ <em class="boldV">U+10000</em> Ã Â <em class="boldV">U+1F0000</em>. Ils s'expriment surÂ 6Â digits hexadÃ©cimaux, mais le <strong>digit de poids fort</strong> est <strong class="cons">trÃ¨s peu exploitÃ©</strong> (il ne prend que les valeursÂ <em class="bold">0</em> ouÂ <em class="bold">1</em>, jamaisÂ 2,Â 3,Â etc.). </li>

    <li> Donc, en soustrayant Ã  tous les points de code la valeurÂ <em class="bold">0x10000</em>, on les ramÃ¨ne dans l'intervalle allant deÂ <em class="bold">0x00000</em> Ã Â <em class="bold">0xFFFFF</em>, avec Ã  la clef <strong class="defin">un digit en moins</strong>. Il ne reste donc plus queÂ <strong class="specialMg">5Â digits hexadÃ©cimaux</strong> Ã  encoder, soitÂ 5Â Ã—Â 4Â =Â <strong>20Â bits</strong>, sachant qu'on dispose de deux mots deÂ 16Â bits, soitÂ <strong>32Â bits</strong>. Cela faitÂ <strong class="pros">12Â bitsÂ supplÃ©mentaires</strong> que l'on peut exploiter. </li>
  </ul>

  <div class="nobullet"> Avec cesÂ 12 bits, on produit <em class="remark">localement</em> un <strong class="defin">encodage autoâ€‘indexÃ©</strong>, en affectant Ã  chacune des deux unitÃ©s d'encodage â€“Â qui sont des <strong class="specialLG">motsÂ de 16 bits</strong>Â â€“ un <strong>motif initial distinctif</strong> (on peut parler de <em>prÃ©fixes binaires</em>) deÂ <strong>6Â bits</strong>Â : </div>
  <ul>
    <li> <code class="cmd"><span style="color: dimgrey;">11011</span><span style="color: darkorange;">0</span></code> pour le mot de <strong class="specialO">haut rang</strong>Â ;  </li>

    <li> <code class="cmd"><span style="color: dimgrey;">11011</span><span style="color: darkturquoise;">1</span></code> pour le mot de <strong class="specialT">bas rang</strong>.  </li>
  </ul>

  <div class="nobullet"> Ensuite, on procÃ¨de Ã  la <strong class="defin">recopie desÂ 20Â bits</strong> du <strong class="specialV">point de code</strong> <strong class="specialMg">ramenÃ© surÂ 5Â digits</strong>, dans l'ordre de leur rang, sur lesÂ <strong>10Â bits vacants</strong> de chacun des deuxÂ mots du codeÂ <strong><em class="sigle">UTFâ€‘16</em></strong>, conformÃ©ment Ã  la figure ciâ€‘dessous. </div>

  <img class="top-left" src="../img/principeUTF-16-2.png">

  <div class="nobullet"> Les deux <strong>prÃ©fixes binaires</strong> permettent de dÃ©terminer immÃ©diatement â€“Â dÃ¨s sa lectureÂ â€“ si un mot est de haut rang ou de bas rang dans un codeÂ <strong><em class="sigle">UTFâ€‘16</em></strong>, sans avoir besoin de lire un mot voisin. C'est le principe de l'<strong class="defin">autoâ€‘indexage</strong>, mÃªme s'il n'est que trÃ¨s partiel ici. En revanche, il est <strong class="warning">indispensable</strong> qu'un tel mot <strong class="warning">ne corresponde pas</strong> au codeÂ <strong><em class="sigle">UTFâ€‘16</em></strong> surÂ <strong>2Â octets</strong> d'un caractÃ¨re duÂ <strong><em class="sigle">BMP</em></strong>, sinon la confusion serait fatale. </div>

  <div class="nobullet"> Et c'est pourquoi, dans leÂ <strong><em class="sigle">BMP</em></strong>, tous les <strong class="specialV">points de code</strong>Â : </div>
  <ul>
    <li> allant deÂ <em class="boldV">U+<span style="color: dimgrey;">D</span><span style="color: darkorange;">800</span></em> (<code><span style="color: dimgrey;">1101 1</span><span style="color: darkorange;">000 0000 0000</span></code>) Ã  <em class="boldV">U+<span style="color: dimgrey;">D</span><span style="color: darkorange;">BFF</span></em> (<code><span style="color: dimgrey;">1101 1</span><span style="color: darkorange;">011 1111 1111</span></code>), </li>

    <li> et deÂ <em class="boldV">U+<span style="color: dimgrey;">D</span><span style="color: darkturquoise;">C00</span></em> (<code><span style="color: dimgrey;">1101 1</span><span style="color: darkturquoise;">100 0000 0000</span></code>) Ã  <em class="boldV">U+<span style="color: dimgrey;">D</span><span style="color: darkturquoise;">FFF</span></em> (<code><span style="color: dimgrey;">1101 1</span><span style="color: darkturquoise;">111 1111 1111</span></code>), </li>
  </ul>
  
  <div style="display: inline-block">
    <img class="top-right" src="../img/UTF-16surrogates.png" width="500px" style="padding-top: 0.2em;">
  <div class="nobullet"> sont <strong class="warning">rÃ©servÃ©s</strong> et donc <strong class="defin">non affectÃ©s Ã  des caractÃ¨res</strong> â€“Â on parle de Â«Â <strong>nonâ€‘caractÃ¨res</strong>Â Â». On appelle ces points de code respectivement des <strong class="specialLGr">mots de substitution</strong> <strong class="specialO">haut</strong> et <strong class="specialT">bas</strong> â€“Â en anglais, <strong>high</strong> and <strong>low surrogates</strong>. On parle Ã©galement de <strong class="specialLGr">paires de substitution</strong> car dans un fichier encodÃ© enÂ <strong><em class="sigle">UTFâ€‘16</em></strong>, ces mots <strong class="warning">ne peuvent aller l'un sans l'autre</strong>.  </div>
  </div><!-- display -->


  <div class="exemples">
  <p class="exemple"> ConsidÃ©rons encore le cas de l'<strong class="title">Ã©moticÃ´ne</strong>Â ğŸ˜‰ nommÃ© <em class="english">Winking face</em>Â <a class="external" href="https://unicode-table.com/fr/1F609/" target="_BLANK"></a> qui appartient auÂ <strong class="defin">planÂ <em class="sigle">SMP</em></strong>. Son encodage au <strong class="defin">formatÂ <em class="sigle">UTFâ€‘16</em></strong>Â estÂ <code class="cmd">D8Â 3DÂ DEÂ 09</code> conformÃ©ment au schÃ©ma ciâ€‘dessous. </p>
  
  <img class="top-left" src="../img/UTF-16exemple.png" style="max-width: 800px">
  
  <p> Il est formÃ© de deux mots deÂ 16Â bits qui sont les <strong class="specialLGr">paires de substitutions</strong> <code class="cmd">0x<span style="color: dimgrey;">D</span><span style="color: darkorange;">83D</span></code> etÂ <code class="cmd">0x<span style="color: dimgrey;">D</span><span style="color: darkturquoise;">E09</span></code>. </p>
  </div><!-- exemple -->
  
  </div><!-- expert -->
</ul>


<div class="remarques"><p class="remarques"></p>
<ol class="littered">
  <li> Un dÃ©butant pourrait Ãªtre surpris par le fait que rÃ©serverÂ <strong>2048Â points de code</strong> â€“Â les <strong class="specialLGr">paires de substitution</strong>Â â€“ soit <strong class="pros">suffisant</strong> pour l'encodage des <strong class="defin">dizaines de milliers de caractÃ¨res</strong> <strong>hors duÂ <em class="sigle">BMP</em></strong>. Mais il ne faut pas perdre de vue que ces points de code ne sont pas utilisÃ©s directement comme des codes. C'est bien entendu par la <strong class="defin">combinatoire des paires</strong> (1024Â Ã—Â 1024) que l'encodage au formatÂ <strong class="title"><em class="sigle">UTFâ€‘16</em></strong> permet de couvrir tous besoins actuels et futurs. </li>

  <li> Comme pour le formatÂ <strong><em class="sigle">UTFâ€‘32</em></strong>, le formatÂ <strong class="title"><em class="sigle">UTFâ€‘16</em></strong> peut poser des <strong class="warning">problÃ¨mes</strong> aux algorithmes de <strong>lecture de bas niveau</strong> (octet par octet) par confusion entre le marqueur de fin de chaÃ®ne â€“Â le caractÃ¨reÂ <strong><em class="sigle">NUL</em></strong>Â â€“ et les <strong>octets nuls</strong> dans les codes de certains caractÃ¨res. </li>
</ol>
</div><!-- remarque -->



<h3 id="formatUTF-8"> Le formatÂ UTFâ€‘8 </h3>



<div class="important">
<p> Le formatÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/UTF-8" target="_BLANK">W</a> est Ã  <strong class="defin">taille variable</strong>Â : </p>

<ul>
  <li> chaque <strong>caractÃ¨re</strong> est encodÃ© surÂ <strong>1Â Ã Â 4</strong>Â <strong class="specialLG">unitÃ©(s) d'encodage</strong>, selon la largeur de son <strong class="specialV">point de code</strong> en termes de nombre de bits Ã  encoderÂ ; </li>

  <li> chaque <strong class="specialLG">unitÃ© d'encodage</strong> Ã©tant formÃ©e d'un <strong>mot deÂ 8Â bits</strong>, c'estâ€‘Ã â€‘dire <strong>un octet</strong>. </li>
</ul>
</div><!-- important -->

<div class="complement">
<p> Le formatÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> est trÃ¨s <strong class="defin">largement adoptÃ©</strong> â€“Â et de plus en plusÂ â€“ dans de nombreux contextes de l'informatique, parce qu'il <strong class="pros">optimise le coÃ»t mÃ©moire</strong> de stockage des fichiers contenant du texte, quelle que soit sa nature (documents, code, etc.)Â : </p>
<ul>
  <li> <strong>pages web</strong> â€“Â et donc, logiciels <strong>navigateurs</strong>Â ;    </li>

  <li> <strong>fichiers bureautiques</strong> au format <strong>OpenDocument</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/OpenDocument" target="_BLANK">W</a>Â ;  </li>

  <li> <strong>systÃ¨mes d'exploitation</strong> comme <em class="mark">Unix</em>, <em class="mark">Linux</em>, <em class="mark">AndroidÂ </em>â€¦ </li>

  <li> nombreux <strong>langages de programmation</strong> etÂ <strong><em class="sigle">IDE</em></strong> â€“Â notamment, <em class="mark">C/C++</em>, <em class="mark">Python</em>, <em class="mark">Arduino</em>â€¦ </li>
</ul>
</div><!-- complement -->


<div class="expert" id="encodageUTF-8">
<p> L'<strong class="title">encodage</strong> au formatÂ <strong><em class="sigle">UTFâ€‘8</em></strong> recourt Ã  l'<strong class="defin">autoâ€‘indexation</strong> systÃ©matique des <strong class="specialLG">unitÃ©s d'encodage</strong> par des <strong class="defin">motifs initiaux</strong> sur leurs <strong>bits de hauts rangs</strong>. Ces motifs sont diffÃ©rents selon le nombre d'unitÃ©s d'encodage nÃ©cessaire Ã  l'encodageÂ : </p>

<ul>
  <li> Si le caractÃ¨re est encodÃ© sur <strong>un seul octet</strong>, ce dernier prend le <strong>motif initial</strong>Â <code class="cmd" style="color: yellowgreen;">0</code> sur son bit de haut rang (<var>d</var><sub>7</sub>). </li>

  <li> SinonÂ : </li>
  <ul>
    <li> Le <strong>motif initial</strong> de l'<strong class="specialR">octet de tÃªte</strong> â€“Â c'estâ€‘Ã â€‘dire de haut rang (<em class="english">leading byte</em>)Â â€“ un <strong>motif initial</strong> formÃ© deÂ <strong>n</strong> bits Ã Â <code class="cmd" style="color: red;">1</code>, autant que le nombre d'octets du code du caractÃ¨re, suivi d'unÂ <code style="color: red;">0</code>. </li>

    <div class="nobullet"> DoncÂ : <code class="cmd" style="color: red;">110</code> pour un caractÃ¨re codÃ© surÂ <strong>2Â octets</strong>, <code class="cmd" style="color: red;">1110</code> pour un caractÃ¨re codÃ© surÂ <strong>3Â octets</strong>, etc. </div>
  
    <li> Le <strong>motif initial</strong> des <strong class="specialY">octets de suite</strong> (<em class="english">trailing bytes</em>) estÂ <code class="cmd" style="color: goldenrod;">10</code>. </li>
  </ul> 
</ul>

<p> Tous les autres bits de l'octet de tÃªte et des octets de suite forment l'<strong class="specialLB">espace d'encodage</strong> disponible. Le tableau ciâ€‘dessous rÃ©capitule ces diffÃ©rents Ã©lÃ©ments. </p>

<div style="overflow-x: auto; margin: 0.5em; margin-right: 0em;">
<table style="margin: 0em; font-size: 90%">
  <tr> 
    <th> Plans <br> <em class="sigle">UCS</em> </th> 
    <th> Points <br> de code </th>
    <th> N<sup style="font-size: 70%">bre</sup> <br> octets </th>
    <th> Format des octets </th>
    <th> Espace d'encodage <br> (bits â€¢) </th>
  </tr>
  <tr>
    <td rowspan="3"> <em class="bold">0</em> <br> <strong><em class="sigle">(BMP)</em></strong> </td>
    <td style="padding-right: 1em; text-align: right">
      <em class="boldV">U+0000</em><br> Ã Â <em class="boldV">U+007F</em></td>
    <td style="text-align: center;"> 1 </td>
    <td style="padding-left: 0.5em;">
      <span class="framed" style="border-color: yellowgreen"><code><span style="color: yellowgreen;">0</span>â€¢â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â (idem que l'<em class="sigle">ASCII</em>Â restreint)
      </td>
    <td style="text-align: center;"> 7Â bits <br> <em>128Â valeurs</em> </td>
  </tr>
  <tr>
    <td style="padding-right: 1em; text-align: right">
      <em class="boldV">U+0080</em><br> Ã Â <em class="boldV">U+07FF</em></td>
    <td style="text-align: center;"> 2 </td>
    <td style="padding-left: 0.5em; line-height: 1.6em;">
      <span class="framed" style="border-color: red"><code><span style="color: red;">110</span>â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â <em>octet de tÃªte</em> <br>
      <span class="framed" style="border-color: goldenrod"><code><span style="color: goldenrod;">10</span>â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â <em>octetÂ de suite</em>
    </td>
    <td style="text-align: center;"> 5Â +Â 6Â =Â 11Â bits <br> <em>2&#8239;048Â valeurs</em> </td>
  </tr>
  <tr>
    <td style="padding-right: 1em; text-align: right">
      <em class="boldV">U+0800</em><br> Ã Â <em class="boldV">U+FFFF</em></td>
    <td style="text-align: center;"> 3 </td>
    <td style="padding-left: 0.5em; line-height: 1.6em;">
      <span class="framed" style="border-color: red"><code><span style="color: red;">1110</span> â€¢â€¢â€¢â€¢</code></span>Â Â <em>octet de tÃªte</em> <br>
      <span class="framed" style="border-color: goldenrod"><code><span style="color: goldenrod;">10</span>â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â <span class="framed" style="border-color: goldenrod"><code><span style="color: goldenrod;">10</span>â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â <em>octetsÂ de suite</em>
    </td>
    <td style="text-align: center;"> 4Â +Â 6Ã—2Â =Â 16Â bits <br> <em>65&#8239;536Â valeurs</em> </td> 
  </tr>
  <tr>
    <td> â©¾Â <em class="bold">1</em> </td>
    <td style="padding-right: 1em; text-align: right">
      <em class="boldV">U+010000</em><br> Ã Â <em class="boldV">U+10FFFF</em></td>
    <td style="text-align: center;"> 4 </td>
    <td style="padding-left: 0.5em; line-height: 1.6em;">
      <span class="framed" style="border-color: red"><code><span style="color: red;">1111 0</span>â€¢â€¢â€¢</code></span>Â Â <em>octet de tÃªte</em> <br>
      <span class="framed" style="border-color: goldenrod"><code><span style="color: goldenrod;">10</span>â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â <span class="framed" style="border-color: goldenrod"><code><span style="color: goldenrod;">10</span>â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>Â Â <span class="framed" style="border-color: goldenrod"><code><span style="color: goldenrod;">10</span>â€¢â€¢ â€¢â€¢â€¢â€¢</code></span>
    </td>
    <td style="text-align: center;"> 3Â +Â 6Ã—3Â =Â 21Â bits <br> <em>plusÂ deÂ 2Â Ã—Â 10<sup>6</sup>Â valeurs</em> </td>
  </tr>
</table>
</div><!-- overflow -->

<p style="margin-top: 1em;"> Ensuite, le <strong class="title">principe d'encodage</strong> des bits est le suivantÂ : </p>

<ul>
	<li> retranscrit en binaire naturel, les valeurs des bits du <strong class="specialV">point de code</strong> du caractÃ¨re sont affectÃ©es aux bits de l'<strong class="specialLB">espace d'encodage</strong> Ã  partir du rangÂ 0 et <strong>dans l'ordre croissant des rangs</strong>Â ; </li>

	<li> les bits de hauts rangs <strong>non employÃ©s</strong> sont mis Ã Â <code class="cmd" style="color: dimgray;">0</code>. </li>
</ul>




<div class="exemples"><p class="exemples"></p>
<ol class="numbered">
  <li> Le <strong class="title">symbole Â«Â &Â Â»</strong> (<em class="english">ampersand</em>Â <a class="external" href="https://unicode-table.com/fr/0026/" target="_BLANK"></a>) de <strong class="specialV">point de code</strong> <em class="boldV">U+0026</em> (donc compris entreÂ U+0000 etÂ U+007F) est <strong class="pros">directement</strong> encodÃ© enÂ <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong> sur <strong>un seulÂ octet</strong>Â <code class="cmd">26</code>. </li>

    <img class="top-right" src="../img/UTF-8exemple2.png" height="200px">
  <li> La <strong class="title">lettre Â«Â Å’Â Â»</strong> (<em class="english">latin capital ligature O E</em>Â <a class="external" href="https://unicode-table.com/fr/20AC/" target="_BLANK"></a>) de <strong class="specialV">point de code</strong> <em class="boldV">U+0152</em> (donc compris entreÂ U+0080 etÂ U+07FF) est encodÃ© enÂ <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong> sur lesÂ <strong>2Â octets</strong>Â <code class="cmd">C5 92</code>, conformÃ©ment au schÃ©ma ciâ€‘dessous. </li>

  

    <img class="top-right" src="../img/UTF-8exemple3.png" height="200px">
  <li> Le <strong class="title">symbole Â«Â â‚¬Â Â»</strong> (<em class="english">euro sign</em>Â <a class="external" href="https://unicode-table.com/fr/20AC/" target="_BLANK"></a>) de <strong class="specialV">point de code</strong> <em class="boldV">U+20AC</em> (donc compris entreÂ U+0800 etÂ U+FFFF) est encodÃ© enÂ <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong> sur lesÂ <strong>3Â octets</strong>Â <code class="cmd">E2 82 AC</code>, conformÃ©ment au schÃ©ma ciâ€‘dessous. </li>

  <li> L'<strong class="title">Ã©moticÃ´ne</strong>Â ğŸ˜‰ (<em class="english">winking face</em>Â <a class="external" href="https://unicode-table.com/fr/20AC/" target="_BLANK"></a>) de <strong class="specialV">point de code</strong> <em class="boldV">U+1F609</em> (donc compris entreÂ U+010000 etÂ U+10FFFF) est encodÃ© enÂ <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong> sur lesÂ <strong>4Â octets</strong>Â <code class="cmd">F0 9F 98 89</code>, conformÃ©ment au schÃ©ma ciâ€‘dessous. </li>

  <img class="top-left" src="../img/UTF-8exemple4.png" style="max-width: 800px">
</ol>
</div><!-- exemples -->


<div class="remarques"><p class="remarques"></p>

<ol class="littered">
	<li> Un intÃ©rÃªt essentiel du formatÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> est son <strong class="defin">identitÃ© d'encodage</strong> avec le format <strong><em class="sigle">ASCII</em> restreint</strong>, qui offre une parfaite <strong class="pros">rÃ©trocompatibilitÃ©</strong> de tous les fichiers codÃ©s dans ce format ancien.  </li>

	<li> De plus, grÃ¢ce au choix judicieux des motifs initiaux, <strong class="pros">aucun caractÃ¨re</strong> ne peut inclure dans son code un <strong>octet nul</strong> Ã  part bien sÃ»r le caractÃ¨reÂ <strong><em class="sigle">NUL</em></strong> luiâ€‘mÃªme qui a le codeÂ <code>0x0</code>. Ce dernier peut donc garder sa fonction usuelle de <strong>caractÃ¨re de fin de chaÃ®ne</strong> qui dÃ©clenche la terminaison des processus de lecture de bas niveau. </li>

  <li> Le choix des <strong class="title">motifs initiaux</strong> est judicieux Ã  plus d'un titre. En particulier, il <strong class="pros">facilite le tri</strong> par ordre lexicographique (<em class="english">collation</em> â€“Â cf.Â chap.Â C5â€‘VIÂ <a class="next" href="../C5-StructuresPointeurs/Cc5-6_chainesCaracteres.html#fonctionComparaison" target="_BLANK"></a>)Â : si l'<strong class="specialR">octet de tÃªte</strong> d'un caractÃ¨re est supÃ©rieur Ã  celui d'un autre, alors cette relation d'ordre vaut aussi entre leurs <strong class="specialV">points de code</strong> respectifs. </li>

	<li> MÃªme en rÃ©quisitionnant des bits pour l'autoâ€‘indexation des octets, l'<strong class="title">espace d'encodage</strong> de l'<strong class="title"><em class="sigle">UTFâ€‘8</em></strong> reste <strong class="pros">beaucoup plus grand</strong> que l'ensemble des points de code du standardÂ <em class="mark">Unicode</em>. Cela garantie la possibilitÃ© de prendre en charge de nouveaux caractÃ¨res dans le futur. </li>

	<li> Sur seulement deux octets, le formatÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> permet de coder <strong class="cons">beaucoup moins</strong> de caractÃ¨res (environÂ 2&#8239;000) que le formatÂ <em class="bold"><em class="sigle">UTFâ€‘16</em></em> (environÂ 65&#8239;000). Mais globalement, sauf pour les fichiers en langues asiatiques, le formatÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> est <strong class="pros">quand mÃªme plus efficace</strong>. En effet, dans la majoritÃ© des fichiers source (documents, code, etc.), les caractÃ¨res dont le point de code est supÃ©rieur Ã Â U+07FF â€“Â donc nÃ©cessitantÂ 3Â octets d'encodageÂ â€“ sont statistiquement rares. Leur prise en charge ne compromet pas l'Ã©conomie d'un octet obtenue sur les caractÃ¨res trÃ¨s frÃ©quents â€“Â ceux du jeuÂ <strong><em class="sigle">ASCII</em> restreint</strong>. </li>
</ol>

</div><!-- remarques -->
</div><!-- expert -->


<h3 id="boutisme"> Conventions de boutisme </h3>



<p> Les <strong class="title">conventions de boutismes</strong> ont Ã©tÃ© Ã©voquÃ©es dans le <strong>contexte gÃ©nÃ©ral</strong> des systÃ¨mes informatiques au chapitreÂ C3â€‘IÂ <a class="previous" href="Cc3-1_typesGeneralites.html#boutisme" target="_BLANK"></a>. Elles existent Ã©galement pour l'<strong class="defin">encodage des caractÃ¨res larges</strong> (puisqu'ils sont encodÃ©s sur plusieurs octets chacun) â€“ et tout particuliÃ¨rement dans les <strong>formats</strong>Â <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong> etÂ <strong class="specialLB"><em class="sigle">UTFâ€‘32</em></strong>. </p>


<div class="important">
<p> Il est possible de <strong class="defin">signaler la convention de boutisme</strong> d'un flux de caractÃ¨res â€“Â chaÃ®ne ou fichierÂ â€“ par l'ajout prÃ©liminaire au <strong>dÃ©but</strong> du flux d'un <strong>caractÃ¨re spÃ©cial</strong> appelÃ© <strong class="title">byte order mark</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Indicateur_d'ordre_des_octets" target="_BLANK">W</a> ouÂ <strong class="title"><em class="sigle">BOM</em></strong>). </p>

<p> EnÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong> comme enÂ <strong class="specialLB"><em class="sigle">UTFâ€‘32</em></strong>, le <strong class="title"><em class="sigle">BOM</em></strong> est signalÃ© par le <strong class="specialV">point de code</strong> <em class="boldV">U+FEFF</em>Â <a class="external" href="https://unicode-table.com/fr/FEFF/" target="_BLANK"></a>, quelle que soit la convention adoptÃ©e. </p>
</div><!-- important -->

<div class="complement">
<p> Inclus dans leÂ <strong><em class="sigle">BMP</em></strong>, le <strong class="specialV">point de code</strong> <em class="boldV">U+FEFF</em> est dÃ©fini comme un <strong class="defin">espace insÃ©cable sans chasse</strong>, autrement dit un <strong>glyphe vide</strong> de <strong>largeur nulle</strong> â€“Â et donc <strong class="pros">visuellement indÃ©tectable</strong>Â â€“ derriÃ¨re lequel aucun saut de ligne ne peut Ãªtre automatiquement insÃ©rÃ© lors d'une mise en page. </p>


<p> C'est l'application effective de la <strong class="defin">convention de boutisme</strong> sur leÂ <strong><em class="sigle">BOM</em></strong> qui permet aux logiciels traitant le flux de caractÃ¨res de <strong class="title">dÃ©tecter la convention</strong> â€“Â et c'est pourquoi on le qualifie de <strong class="pros">nombre magique</strong>Â <a class="external" href="https://fr.wikipedia.org/wiki/Nombre_magique_(programmation)" target="_BLANK">W</a>. </p>
</div><!-- complement -->

<ul>
  <li> Avec le principe d'encodage du formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong> exposÃ© supraÂ <a class="supra" href="Cc3-9_typesCaracteresEtendus.html#formatUTF-16"></a>, le <strong class="title"><em class="sigle">BOM</em></strong> apparaÃ®t comme la sÃ©quence ordonnÃ©e d'octetsÂ :  </li> 
  <ul>
    <li> <code class="cmd">FF FE</code> en convention <strong class="defin">petitâ€‘boutisme</strong> â€“Â et le format est alors dÃ©signÃ© <strong class="specialLB"><em class="sigle">UTFâ€‘16LE</em></strong> (<em class="english">little endian</em>)Â ; </li>
  
    <li> <code class="cmd">FE FF</code> en convention <strong class="defin">grosâ€‘boutisme</strong> â€“ et le format est alors dÃ©signÃ© <strong class="specialLB"><em class="sigle">UTFâ€‘16BE</em></strong> (<em class="english">big endian</em>). </li>
  </ul>
  
 
  <li> Avec le principe d'encodage du formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘32</em></strong> exposÃ© supraÂ <a class="supra" href="Cc3-9_typesCaracteresEtendus.html#formatUTF-16"></a>, leÂ <strong class="title"><em class="sigle">BOM</em></strong> apparaÃ®t comme la sÃ©quence ordonnÃ©e d'octetsÂ :  </li> 
  <ul>
    <li> <code class="cmd">FF FE 00 00</code> en convention <strong class="defin">petitâ€‘boutisme</strong> â€“ et le format est alors dÃ©signÃ© <strong class="specialLB"><em class="sigle">UTFâ€‘32LE</em></strong>Â ; </li>
  
    <li> <code class="cmd">00 00 FE FF</code> en convention <strong class="defin">grosâ€‘boutisme</strong> â€“ et le format est alors dÃ©signÃ© <strong class="specialLB"><em class="sigle">UTFâ€‘16BE</em></strong>. </li>
  </ul>
</ul>

<div class="expert">
<p> Selon le standard <strong>Unicode</strong>, en l'<strong class="title">absence deÂ <em class="sigle">BOM</em></strong> dans un flux de caractÃ¨res, c'est la convention <strong class="specialLB">grosâ€‘boutisme</strong> est censÃ©e s'appliquer <strong class="warning">par dÃ©faut</strong>. Toutefois, certains systÃ¨me d'exploitation ne respectent pas cette rÃ¨gle. Ainsi, c'est le formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16LE</em></strong> qui est utilisÃ© par dÃ©faut sousÂ <em class="mark">Windows</em>. </p>

<p> Soulignons qu'avec le formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong> tout particuliÃ¨rement, une <strong class="warning">erreur d'Ã©valuation</strong> de la <strong class="defin">convention de boutisme</strong> n'est <strong class="cons">pas dÃ©tectable</strong> automatiquement par une simple analyse binaire. En effet, le formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong> n'est <strong class="cons">pas globalement autoâ€‘indexÃ©</strong>Â : les codes de caractÃ¨res avec leurs octets prÃ©sentÃ©s en ordre inverse sont ceux d'autres caractÃ¨res. </p>

<div class="exemples">
<p class="exemple"> ConsidÃ©rons tout simplement la <strong class="title">lettre Â«Â AÂ Â»</strong>. Son code au formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16LE</em></strong> est le mot deÂ 16Â bitsÂ <code class="cmd">0041</code> (exprimÃ© en hexadÃ©cimal).  </p>

<p> Toutefois, si on procÃ¨de <strong class="warning">inversion de l'ordre des deux octets</strong>, ce mot devientÂ <code class="cmd">4100</code> et correspond au code de l'idÃ©ogramme Â«Â <em class="bold">ä„€</em>Â Â» qui signifie Â«Â catastropheÂ Â»Â ! </p>
</div><!-- exemple -->

<p> Ã€ la lumiÃ¨re de cet exemple trivial, on voit tout l'<strong class="pros">intÃ©rÃªt</strong> que prÃ©sente leÂ <strong class="title"><em class="sigle">BOM</em></strong> pour Ã©viter les confusions dans un flux de caractÃ¨res encodÃ© au formatÂ <strong class="specialLB"><em class="sigle">UTFâ€‘16</em></strong>. </p>


<!-- expert -->
<h4> Cas du formatÂ UTFâ€‘8 </h4>
 


<p> L'<strong class="specialLG">unitÃ© d'encodage</strong> enÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> Ã©tant d'<strong>un seul octet</strong>, la notion de convention de boutisme n'a en principe <strong class="warning">pas de sens</strong> dans ce format. </p>

<p> De plus, le formatÂ <strong class="title"><em class="sigle">UTFâ€‘8</em></strong> est intÃ©gralement <strong class="pros">autoâ€‘indexÃ©</strong>. GrÃ¢ce aux motifs binaires initiaux, il est facile de <strong class="defin">dÃ©terminer la convention de boutisme</strong> adoptÃ©e dÃ¨s que cela devient nÃ©cessaire, c'estâ€‘Ã â€‘dire lors de la lecture du premier caractÃ¨re encodÃ© sur au moins deux octets. En lisant son premier octetÂ :  </p> 
<ul>
  <li> s'il s'agit d'un <strong>octet de tÃªte</strong>, c'est la convention <strong class="specialLB">petitâ€‘boutiste</strong> qui est adoptÃ©eÂ ; </li>

  <li> et s'il s'agit d'un <strong>octet de suite</strong>, c'est la convention <strong class="specialLB">grosâ€‘boutiste</strong>. </li>
</ul>


<div class="complement">
<p> NÃ©anmoins, certains <strong class="defin">logiciels</strong> â€“Â par exemple, l'Ã©diteur de code de l'<strong><em class="sigle">IDE</em>Â Microsoft VisualStudio</strong>Â â€“ placent un caractÃ¨reÂ <strong class="title"><em class="sigle">BOM</em></strong> au dÃ©but de tout fichier encodÃ© en <strong class="specialLB"><em class="sigle">UTFâ€‘8</em></strong>, dans l'intention de signaler l'emploi de ce format qui n'est natif sur les systÃ¨mes d'exploitation <em class="mark">Microsoft Windows</em>. </p>

<p> EnÂ <strong class="specialLB"><em class="sigle">UTFâ€‘8</em></strong>, leÂ <strong class="title"><em class="sigle">BOM</em></strong> possÃ¨de le code <code class="cmd">EF BB BF</code>. </p>
</div><!-- complement -->

</div><!-- expert -->



























<h2> Les types de caractÃ¨res larges </h2>



<h3> GÃ©nÃ©ralitÃ©s </h3>



<div class="important">
<p> Pour gÃ©rer des donnÃ©es de <strong class="specialG">type caractÃ¨re</strong> prenant des valeurs dans tous le catalogue <strong>Unicode</strong> â€“Â donc potentiellement encodÃ©es sur <strong class="defin">plusieurs octets</strong>Â â€“ les langagesÂ <strong>C</strong> etÂ <strong>C++</strong> mettent Ã  disposition du codeur <strong>trois types</strong> de <strong class="title">caractÃ¨res larges</strong> (en anglais, <em class="english">wide characters</em>)Â : <code class="prettyprint lang-c">wchar_t</code>, <code class="prettyprint lang-c">char16_t</code> et <code class="prettyprint lang-c">char32_t</code>.  </p>
</div><!-- important -->

<div class="complement">
<p>	Ces types sont intÃ©grÃ©s dans le <strong class="pros">noyau</strong> duÂ langageÂ <strong class="title">C++</strong> depuis la <strong>normeÂ C++11</strong>. </p>

<p> En langageÂ <strong class="title">C</strong>, ils ont Ã©tÃ© introduits par des fichiers d'enâ€‘tÃªte de la <strong>bibliothÃ¨que standard</strong>Â :  </p>
<ul>
  <li> <code class="prettyprint lang-c">wchar_t</code> est dÃ©clarÃ© dans les fichiers <code class="filename">stddef.h</code> etÂ <code class="filename">wchar.h</code>Â ; </li>

  <ul>
  	<li> sa <strong class="defin">taille</strong> vautÂ <strong>2Â ouÂ 4Â octets</strong>, selon l'implÃ©mentationÂ ; </li>

  	<li> c'est un type <strong class="cons">ancien</strong>, maintenu pour des questions de compatibilitÃ©, mais qu'il est prÃ©fÃ©rable de <strong class="warning">ne plus utiliser</strong>, en privilÃ©giant les types Ã  taille spÃ©cifiÃ©e dÃ©crits ciâ€‘dessousÂ ; </li>
  </ul>

  <li> <code class="prettyprint lang-c">char16_t</code> etÂ <code class="prettyprint lang-c">char32_t</code> sont dÃ©clarÃ©s dans le fichierÂ <code class="filename">uchar.h</code>Â ; </li>

  <ul>
  	<li> leur <strong class="defin">taille</strong> est spÃ©cifiÃ©e en <strong>nombre de bits</strong> par leur identificateur, quelle que soit l'implÃ©mentation (exactement comme les types <code>int8_t</code>, <code>int16_t</code>)Â ; </li>

  	<li> ils sont conÃ§us pour constituer les <strong class="specialLG">unitÃ©s d'encodage</strong> des caractÃ¨res, respectivement dans les <strong>formats</strong>Â <strong class="defin"><em class="sigle">UTFâ€‘16</em></strong> etÂ <strong class="defin"><em class="sigle">UTFâ€‘32</em></strong>. </li>
  </ul>
</ul>
</div><!-- complement -->

<div class="expert">
<p class="square"> De plus, la <strong>norme</strong>Â <strong class="title">C++20</strong> a introduit le <strong>type</strong>Â <code class="prettyprint lang-c">char8_t</code> pour complÃ©ter la sÃ©rie (cf.Â sa prÃ©sence dans la liste des motsâ€‘clef du langageÂ <a class="external" href="https://en.cppreference.com/w/cpp/keyword/char8_t" target="_BLANK">C++</a>). Il ne s'agit pas Ã  proprement parler d'un type de caractÃ¨re large, puisqu'il a les mÃªmes caractÃ©ristiques queÂ <code class="prettyprint lang-c">unsigned char</code>, mais on peut l'assimiler comme tel en raison de l'usage qui en est fait pour constituer les <strong class="specialLG">unitÃ©s d'encodage</strong> du <strong>format</strong>Â <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong>. </p>

<p class="square"> Notons par ailleurs qu'en langageÂ <strong class="title">C</strong>, il reste possible d'employer simplement le <strong>type</strong>Â <code class="prettyprint lang-c">char</code> pour mÃ©moriser les <strong>octets</strong> des caractÃ¨res encodÃ©s au <strong>format</strong>Â <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong> dans la mesure oÃ¹ ce type possÃ¨de bienÂ <strong>256Â valeurs</strong>. Le fait que, le plus souvent la moitiÃ© de ces valeurs soient <strong>nÃ©gatives</strong>Â (cf.Â chap.Â C3â€‘IIÂ <a class="previous" href="Cc3-2_typesEntiers.html#remarquesTypes" target="_BLANK"></a>) n'est pas un problÃ¨me rÃ©dhibitoire. Toutefois, il importe de <strong class="warning">ne jamais perdre de vue cet aspect</strong> dans les algorithmes programmÃ©s, en particulier lorsqu'on opÃ¨re des tests de comparaison numÃ©rique sur les codes des caractÃ¨res. Il suffit en principe d'opÃ©rer une <strong class="defin">conversion</strong> dans le type <code class="prettyprint lang-c">unsigned char</code> lorsque cela est nÃ©cessaire. </p>

<div class="exemples">
<p class="exemple"> Le programme acadÃ©mique ciâ€‘dessous emploie une <strong class="title">chaÃ®ne de caractÃ¨res</strong>Â <code class="prettyprint lang-c">u8"Ã‡a"</code> encodÃ©e au <strong>format</strong>Â <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong>. Elle est dÃ©clarÃ©e comme un pointeurÂ (cf.Â chap.Â C2â€‘VIÂ <a class="previous" href="../C2-ElementsLangage/Cc2-6_entreesSortiesStandards.html#C-style_string" target="_BLANK"></a>) dans le <strong>type</strong> <code class="prettyprint lang-c">signed char*</code>  pour montrer le fait qu'un type d'encodage signÃ© ne pose <strong class="pros">pas de problÃ¨me</strong>.  </p>

<!---------- ne pas indenter ---------->
<pre class="prettyprint lang-c linenums:1">
#include &lt;stdio.h&gt;

signed char * text = u8"Ã‡a";

int main(void) {
    printf("\"%s\" : ", text);
    while (*text) printf("0x%hhX ", *text++);
    return 0;
}  
</pre>
<!---------- ne pas indenter ---------->

<p> L'instruction de la ligneÂ nÂº6 affiche la chaÃ®ne. Quand Ã  la ligneÂ nÂº7, elle affiche successivement le <strong>code hexadÃ©cimal</strong> respectif de chaque <strong class="specialLG">octet d'encodage</strong> des caractÃ¨res de cette chaÃ®ne (c'estâ€‘Ã â€‘dire tels qu'ils sont mÃ©morisÃ©s) via la spÃ©cification de conversionÂ <code class="prettyprint lang-c">%hhX</code>, donc dans le type <code class="prettyprint lang-c">unsigned char</code>. Avec <strong class="OnlineGDB">OnlineGDB</strong>, on obtient la sortie attendueÂ : </p>


<!---------- ne pas indenter ---------->
<pre class="displayDark">
"Ã‡a" : 0xC3 0x87 0x61  
</pre>
<!---------- ne pas indenter ---------->

<p> En effet, on peut vÃ©rifier qu'au formatÂ <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong>: </p>
<ul>
  <li> la majuscule Â«Â <em class="bold">Ã‡</em>Â Â»Â (point de codeÂ U+00C7Â <a class="external" href="https://unicode-table.com/fr/00C7/" target="_BLANK"></a>) a bien le codeÂ <code class="cmd">C3 87</code>Â ;  </li>

  <li> la minuscule Â«Â <em class="bold">a</em>Â Â»Â (point de codeÂ U+0061Â <a class="external" href="https://unicode-table.com/fr/0061/" target="_BLANK"></a>) a bien le codeÂ <code class="cmd">61</code>. </li>
</ul>
</div><!-- exemple -->

<p> On verra ainsi au chapitreÂ C5â€‘VIÂ <a class="next" href="../C5-StructuresPointeurs/Cc5-6_chainesCaracteres.html#fonctionsChaines" target="_BLANK"></a> que les <strong class="title">fonctions</strong> de la bibliothÃ¨que standard du langageÂ <strong class="title">C</strong> qui opÃ¨rent sur les <strong>chaÃ®nes de styleÂ C</strong> ont leurs arguments formels le plus souvent dÃ©clarÃ©s dans le <strong>type</strong>Â <code class="prettyprint lang-c">char*</code>. NÃ©anmoins, elles sont <strong class="pros">opÃ©rationnelles</strong> pour des chaÃ®nes de caractÃ¨res encodÃ©es au <strong>format</strong>Â <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong>.  </p>
</div><!-- expert -->



<h3 id="valCarEtendus"> Codage des valeurs de types caractÃ¨res larges </h3>



<div class="important">
<p> Dans un <strong>programme source</strong> en langagesÂ <strong>C</strong> etÂ <strong>C++</strong>, on <strong class="title">code</strong> des <strong class="defin">valeurs de caractÃ¨res larges</strong>Â : </p>

<ul>
  <li> avec la <strong class="pros">mÃªme syntaxe</strong> que celle des <strong>caractÃ¨res simples</strong>, pour mÃ©moire (cf.Â chap.Â C3â€‘VIIIÂ <a class="previous" href="../C3-numeration/Cc3-8_typesCaracteres.html#valeurCarImprimable" target="_BLANK"></a>)Â : </li>
  <ul>
    <li> avec des <strong class="specialO">guillemets simples</strong> <code class="prettyprint lang-c">''</code>,</li>

    <li> et entre les guillemets, soit par <strong>syntaxe automorphe</strong>Â <a class="external" href="Cc3-9_typesCaracteresEtendus.html" target="_BLANK"></a>, soit par <strong>sÃ©quences d'Ã©chappement</strong>. </li>
  </ul>

  <li> mais en employant un <strong class="defin">prÃ©fixe d'encodage</strong>Â : <br>
  <span class="inline">
    <code class="prettyprint lang-c">L</code>, <code class="prettyprint lang-c">u</code> ou <code class="prettyprint lang-c">U</code> respectivement pour les types <code class="prettyprint lang-c">wchar_t</code>, <code class="prettyprint lang-c">char16_t</code> etÂ <code class="prettyprint lang-c">char32_t</code>.
  </span> </li>
</ul>
</div><!-- important -->



<h4 id="syntaxeAutomorphe"> Syntaxe automorphe </h4>


<div class="complement">
<p> Dans un Ã©diteur de code, pour permettre la <strong class="title">syntaxe automorphe</strong> de <strong class="defin">toutes les valeurs de caractÃ¨res imprimables</strong> de l'<strong><em class="sigle">UCS</em></strong> â€“Â c'estâ€‘Ã â€‘dire directement par les <strong class="specialM">glyphes</strong> des caractÃ¨res, qui peuvent Ãªtre gÃ©nÃ©rÃ©s par les <strong>touches du clavier</strong> ou par copierâ€‘coller depuis une <strong>table des caractÃ¨res</strong>Â â€“ il est <strong class="pros">recommandÃ©</strong> de choisir le <strong>format</strong>Â <strong class="defin"><em class="sigle">UTFâ€‘8</em></strong> pour le <strong>fichier source</strong>. </p>
</div><!-- complement -->

<div class="exemples"><p class="exemples"></p>
<ul>
  <li> sous <strong class="Codeblocks">Code::Blocks</strong>, on passe par le menu <code>Settings/Editorâ€¦</code> et l'ongletÂ <code>Encoding settings</code> (cocher l'option <code>AsÂ default encoding</code> si les fichiers ont un format d'encodage initial diffÃ©rent)Â ; </li>

  <li> sous <strong class="Sublime">Sublime Text</strong>, ce choix est en gÃ©nÃ©ral celui <strong>par dÃ©faut</strong> (cf. la valeur de l'attributÂ <code>default_encoding</code> dans le fichier de prÃ©fÃ©rence du rÃ©pertoire <code>Default</code> ouvert via le menu <code>Preferences/Settings</code>)Â ; sinon, il faut coder ce choix dans le fichier de prÃ©fÃ©rence du rÃ©pertoire <code>User</code>.  </li>
</ul>
</div><!-- exemples -->


<h4 id="syntaxeAlternative"> Syntaxe alternative par sÃ©quencesÂ d'Ã©chappement </h4>


<div class="complement">
<p> Pour les <strong>caractÃ¨res non imprimables</strong>, ou mÃªme si la syntaxe automorphe n'est pas opÃ©rationnelle sur l'Ã©diteur de code, une <strong class="title">syntaxe alternative</strong> permet de coder <strong class="pros">n'importe quelle valeur de caractÃ¨re</strong> de l'<strong><em class="sigle">UCS</em></strong> Ã  partir du point de codeÂ <em class="boldV">U+A0</em>Â ; il suffit d'employer une <strong class="defin">sÃ©quence d'Ã©chappement</strong> de la formeÂ : </p>

<ul>
  <li> <code class="prettyprint lang-c">\u<span class="nocode"><strong class="specialO">xxxx</strong></span></code> oÃ¹Â <strong class="specialO">xxxx</strong> est le <strong>point de code</strong> Ã Â <strong>4Â digits</strong> hexadÃ©cimaux du caractÃ¨re si ce dernier est <strong>dans leÂ <strong class="specialLB"><em class="sigle">BMP</em></strong></strong>Â (<em class="english">basic multilingual plane</em> â€“Â cf.Â supraÂ <a class="supra" href="Cc3-9_typesCaracteresEtendus.html#plansUnicode"></a>); </li>

  <li> <code class="prettyprint lang-c">\U<span class="nocode"><strong class="specialO">xxxxxxxx</strong></span></code> oÃ¹Â <strong class="specialO">xxxxxxxx</strong> est le <strong>point de code</strong> Ã Â <strong>8Â digits</strong> hexadÃ©cimaux du caractÃ¨re si ce dernier est dans un <strong class="specialLB">autre plan</strong> deÂ l'<strong><em class="sigle">UCS</em></strong>. </li>
</ul>
</div><!-- complement -->

<div class="remarques">
<p class="remarques"> On rappelle (cf.Â chap.Â C3â€‘XIIIÂ <a class="previous" href="../C3-numeration/Cc3-8_typesCaracteres.html#syntaxeGeneraleSeqEchap" target="_BLANK"></a>) que les <strong class="title">valeurs de caractÃ¨res</strong> des points de codeÂ <em class="boldV">U+00</em> Ã Â <em class="boldV">U+FF</em>Â (inclus) sont quant Ã  elles codables avec une <strong class="defin">sÃ©quence d'Ã©chappement</strong> prÃ©fixÃ©e  parÂ <code class="prettyprint lang-c">\x</code> ouÂ <code class="prettyprint lang-c">\X</code> comme pour les caractÃ¨res simples. </p>
</div><!-- remarques -->





<div class="exemples"><p class="exemples"> </p>
<p> Tous les exemples ciâ€‘aprÃ¨s peuvent Ãªtre <strong class="pros">testÃ©s</strong> enÂ langageÂ <strong>C</strong> dans l'environnement <strong class="OnlineGDB">OnlineGDB</strong> en utilisant le programme gÃ©nÃ©rique suivantÂ : </p>

<!---------- ne pas indenter ---------->
<pre class="prettyprint lang-c linenums:1">
#include &lt;stdio.h&gt;
#include &lt;uchar.h&gt;

<span class="nocode"><strong class="specialG">type</strong></span> c = <span class="nocode"><strong>prÃ©fixe</strong></span>'<span class="nocode"><strong class="specialO">glyphe</strong> ou <strong class="specialO">sÃ©quence d'Ã©chappement</strong></span>';

int main(void) {
  printf("%x\n", c);
}
</pre>
<!---------- ne pas indenter ---------->

<p> oÃ¹Â : </p>

<ul>
  <li> la <strong>dÃ©claration</strong> (ligneÂ nÂºÂ 4) est Ã  adapter au cas par cas de chaque exempleÂ ; </li>

  <li> l'instruction d'<strong>affichage</strong> (ligneÂ nÂºÂ 7) affiche le <strong class="defin">code hexadÃ©cimal</strong> du caractÃ¨re dans le <strong class="defin">format</strong> codÃ© par le <strong>prÃ©fixe</strong> dans sa dÃ©clarationÂ ; cela permet ainsi de vÃ©rifier que la dÃ©claration du caractÃ¨re a Ã©tÃ© interprÃ©tÃ©e correctement par le compilateur. </li>
  
  <div class="expert">
  <div class="nobullet"> <em>(L'affichage du glyphe du caractÃ¨re est plus complexe Ã  obtenir en tant que caractÃ¨re individuel. Mais on verra au chapitreÂ C5â€‘VI qu'un tel affichage est trÃ¨s simple au sein d'une chaÃ®ne de caractÃ¨res codÃ©e au formatÂ <em class="bold"><em class="sigle">UTFâ€‘8</em></em>.)</em> </div>
  </div><!-- expert -->
</ul>


<ol class="numbered">
  <li> La <strong class="title">lettreÂ Â«Â AÂ Â»</strong> de l'<strong class="specialLB">alphabet latin</strong> (point de codeÂ U+41Â <a class="external" href="https://unicode-table.com/fr/0041/" target="_BLANK"></a>)Â : </li>

  <ul>
    <li> se code <code class="prettyprint lang-c">U'A'</code> ouÂ <code class="prettyprint lang-c">U'\x41'</code> dans le typeÂ <code class="prettyprint lang-c">char32_t</code>Â ; </li>

    <li> se code <code class="prettyprint lang-c">u'A'</code> ouÂ <code class="prettyprint lang-c">u'\x41'</code> dans le typeÂ <code class="prettyprint lang-c">char16_t</code>Â ; </li>

    <li> se code <code class="prettyprint lang-c">'A'</code> ou <code class="prettyprint lang-c">'\x41'</code> dans le typeÂ <code class="prettyprint lang-c">char</code>Â (comme n'importe quel caractÃ¨re du jeuÂ <em class="sigle">ASCII</em> restreint)Â ; </li>
  </ul>

  <li> La <strong class="title">lettreÂ Â«Â Î©Â Â»</strong> de l'<strong class="specialLB">alphabet grec</strong>  (<em>omÃ©ga</em> â€“Â point de codeÂ U+3A9Â <a class="external" href="https://unicode-table.com/fr/03A9/" target="_BLANK"></a>)Â : </li>

  <ul>
    <li> se code <code class="prettyprint lang-c">U'Î©'</code> ouÂ <code class="prettyprint lang-c">U'\u03A9'</code> dans le typeÂ <code class="prettyprint lang-c">char32_t</code>Â ; </li>

    <li> se code <code class="prettyprint lang-c">u'Î©'</code> ouÂ <code class="prettyprint lang-c">u'\u03A9'</code> dans le typeÂ <code class="prettyprint lang-c">char16_t</code>Â ; </li>

    <li> mais ne peut <strong class="warning">pas</strong> se coder dans le typeÂ <code class="prettyprint lang-c">char</code> puisque son point de code est supÃ©rieur Ã Â U+7F (il faudraitÂ 2Â unitÃ©s d'encodage)Â ; </li>
  </ul>

  <li> l'<strong class="title">Ã©moticÃ´ne</strong>Â ğŸ˜‰ (<em class="english">winking face</em> â€“Â point de codeÂ U+1F609Â <a class="external" href="https://unicode-table.com/fr/1F609/" target="_BLANK"></a>)Â : </li>

  <ul>
    <li> se code <code class="prettyprint lang-c">U'ğŸ˜‰'</code> ou <code class="prettyprint lang-c">U'\U0001F609'</code> dans le typeÂ <code class="prettyprint lang-c">char32_t</code> (attention, elle ne peut Ãªtre saisie par son glyphe que si la police de l'Ã©diteur de code inclut ce caractÃ¨re ou si le systÃ¨me d'exploitation procÃ¨de Ã  une substitution Ã©quivalente de police en cas d'absence)Â ;  </li>

    <li> mais ne peut <strong class="warning">pas</strong> se coderÂ : </li>
    <ul>
      <li> ni dans le typeÂ <code class="prettyprint lang-c">char</code> puisque son point de code est supÃ©rieur Ã Â U+7F (il faudraitÂ 4Â unitÃ©s d'encodage),</li>

      <li> ni dans le typeÂ <code class="prettyprint lang-c">char16_t</code> puisque son point de code est supÃ©rieur Ã Â U+FFFF (il faudraitÂ 2Â unitÃ©s d'encodage).</li>
    </ul>
  </ul>
</ol>

</div><!-- exemples -->



<h3> Manipulation des donnÃ©es de types caractÃ¨resÂ larges </h3>



<div class="important">
<p> La <strong class="title">manipulation des donnÃ©es</strong> de types <strong class="defin">caractÃ¨res larges</strong> obÃ©it aux <strong class="pros">mÃªmes principes gÃ©nÃ©raux</strong> que la manipulation de donnÃ©es de type <strong>caractÃ¨re simples</strong>Â (cf.Â chap.Â C3â€‘VIIIÂ <a class="previous" href="../C3-numeration/Cc3-8_typesCaracteres.html#manipCaracteres" target="_BLANK"></a>). </p>
</div><!-- important -->

<div class="complement">
<p> En effetÂ : </p>
<ul>
  <li> puisque les <strong class="defin">types caractÃ¨res</strong> â€“Â simples ou larges â€“ sont fondamentalement des <strong>types entiers</strong>, on peut les manipuler comme tels, avec les <strong>opÃ©rateurs gÃ©nÃ©raux</strong>Â ; toutefois, seules certaines opÃ©rations sont <strong class="title">pertinentes</strong> en termes de valeurs de caractÃ¨res (affectation, diffÃ©rence, comparaisons,Â etc.)Â ; </li>

  <li> pour des opÃ©rations plus techniques, le fichier d'enâ€‘tÃªteÂ <code class="filename">wctype.h</code> de la bibliothÃ¨que standard du langageÂ <strong>C</strong> (<code class="filename">cwctype</code> pour leÂ <strong>C++</strong>), fournit des <strong class="pros">fonctions analogues</strong> Ã  celles dÃ©clarÃ©es dans le fichier <code class="filename">ctype</code>, mais pour des donnÃ©es de type <code class="prettyprint lang-c">wchar_t</code>Â <a class="external" href="https://en.cppreference.com/w/c/string/wide" target="_BLANK">C</a>. </li>
</ul>
</div><!-- complement -->

<div class="expert"> 
<p> En fait, les fonctions dÃ©clarÃ©es dans le fichierÂ <code class="filename">wctype.h</code> opÃ¨rent sur des donnÃ©es de typeÂ <code class="prettyprint lang-c">wint_t</code> (<em class="english">wide integer type</em>Â <a class="external" href="http://www.cplusplus.com/reference/cwchar/wint_t/" target="_BLANK"></a>). </p>
<ul>
  <li> Dans la pratique, il s'agit d'une <strong class="defin">extension</strong> surÂ <strong>32Â bits</strong> du type <code class="prettyprint lang-c">wchar_t</code> qui, rappelonsâ€‘le, est parfois limitÃ© Ã Â 16Â bits. En particulier, il permet d'inclure le caractÃ¨re spÃ©cialÂ <strong><em class="sigle">WEOF</em></strong> (<em class="english">wide endâ€‘â€‘file</em>) qui est trÃ¨s employÃ© dans le traitement des flux de donnÃ©es de types caractÃ¨res larges. </li>

  <li> De ce fait, les fonctions sont opÃ©rationnelles aussi pour les donnÃ©es de typeÂ <code class="prettyprint lang-c">char32_t</code> (et aussi de type <code class="prettyprint lang-c">char16_t</code>, bien entendu).</li>
</ul>
</div><!-- expert -->

<div class="exemples"><p class=exemples></p>
<p> Les exemples ciâ€‘aprÃ¨s peuvent Ãªtre testÃ©s dans l'environnement <strong class="OnlineGDB">OnlineGDB</strong> en utilisant le programme gÃ©nÃ©rique suivantÂ :  </p>

<!---------- ne pas indenter ---------->
<pre class="prettyprint lang-c linenums:1">
#include &lt;stdio.h&gt;
#include &lt;uchar.h&gt;
#include &lt;wctype.h&gt;
#include &lt;locale.h&gt;

int main(void) {
  setlocale(LC_ALL, "en_US.utf8");
  printf("%X\n", <span class="nocode"><strong>expression d'appel Ã  tester</strong></span>);
  return 0;
}
</pre>
<!---------- ne pas indenter ----------> </p>


<div class="expert">
<p> <em>(Ici, il est nÃ©cessaire de modifier certaines variables d'environnement locales durant l'exÃ©cution du programme â€“Â cf. l'instruction en ligneÂ nÂºÂ 7, avec la directive d'inclusion requise en ligneÂ nÂºÂ 4. Avec OnlineGDB, on doit affecter Ã  la variableÂ <code>LC_ALL</code> la valeur <code>"en_US.utf8"</code> parce que cette locale est bien installÃ©e sur le serveur d'exÃ©cution, mais sur unÂ PC Linux, on pourrait trÃ¨s bien aussi lui donner la valeur <code>"fr_FR.utf8"</code>.)</em> </p>
</div><!-- expert -->

<ol class="numbered">
  <li> La <strong class="title">fonction</strong>Â <code class="prettyprint lang-c">iswcntrl</code>Â <a class="external" href="https://en.cppreference.com/w/c/string/wide/iswcntrl" target="_BLANK">C</a> (<em class="english">is wide control</em>) <strong>teste</strong> si son argument est un <strong class="defin">caractÃ¨re de contrÃ´le</strong>. </li>
  <ul>
    <li>  L'expression d'appel <code class="prettyprint lang-c">iswcntrl(u'â‚¬')</code> retourne la valeurÂ <code class="cmd">0</code> â€“Â nulle, donc Ã©quivalente Ã  <strong class="defin">faux</strong> au sens boolÃ©enÂ â€“ ce qui est <strong class="pros">correct</strong> parce que le symbole monÃ©taireÂ Â«Â <em class="bold">â‚¬</em>Â Â» n'est <strong>pas un caractÃ¨re de contrÃ´le</strong>. </li>

    <li> Et a contrario, l'expression <code class="prettyprint lang-c">iswcntrl(u'\t')</code> est Ã©valuÃ©eÂ <code class="cmd">2</code>, doncÂ <strong class="defin">vrai</strong>, ce qui est une fois de plus <strong class="pros">correct</strong> puisque la sÃ©quence d'Ã©chappementÂ <code>\t</code> code le caractÃ¨re de contrÃ´leÂ <strong><em class="sigle">HT</em></strong> (saut de tabulation horizontale). </li>
  </ul>
  
  <li> La <strong class="title">fonction</strong>Â <code class="prettyprint lang-c">iswupper</code>Â <a class="external" href="https://en.cppreference.com/w/c/string/wide/iswupper" target="_BLANK">C</a> (<em class="english">is wide upper</em>) <strong>teste</strong> si son argument est une <strong class="defin">lettre majuscule</strong>. </li>
  <ul>
    <li> L'expression d'appel <code class="prettyprint lang-c">iswupper(u'Ã‡')</code> retourne la valeurÂ <code class="cmd">1</code> â€“Â non nulle, donc Ã©quivalente Ã  <strong class="defin">vrai</strong> au sens boolÃ©en, ce qui est <strong class="pros">correct</strong> puisque la lettre Â«Â <em class="bold">Ã‡</em>Â Â» est bien une <strong>majuscule</strong>. </li>

    <li> Et a contrario, l'expression <code class="prettyprint lang-c">iswupper(u'Ã§')</code> est Ã©valuÃ©eÂ <code class="cmd">0</code>, doncÂ <strong class="defin">faux</strong>, ce qui est une fois de plus <strong class="pros">correct</strong> puisque la lettre Â«Â <em class="bold">Ã§</em>Â Â» n'est <strong class="warning">pas</strong> <strong>une majuscule</strong>. </li>
  </ul>
  
  <li> La <strong class="title">fonction</strong>Â <code class="prettyprint lang-c">towlower</code>Â <a class="external" href="https://en.cppreference.com/w/c/string/wide/towlower" target="_BLANK">C</a> (<em class="english">to wide lower</em>) <strong>retourne</strong> le <strong>code</strong> de la <strong class="defin">lettre minuscule correspondante</strong> Ã  l'argument si ce dernier prend la valeur d'une lettre majuscule ayant une minuscule. Sinon, il retourne simplement le code l'argument. </li>
  <ul>
    <li> L'expression d'appel <code class="prettyprint lang-c">towlower(u'Ã‡')</code> retourne la <strong class="defin">valeur</strong>Â <code class="cmd">E7</code> qui <strong class="pros">est bien</strong> le codeÂ <strong><em class="sigle">UTFâ€‘16</em></strong> de la lettre <strong class="defin">minuscule</strong>Â Â«Â <em class="bold">Ã§</em>Â Â»Â <a class="external" href="https://unicode-table.com/fr/00E7/" target="_BLANK">C</a>. </li>

    <li> L'expression d'appel <code class="prettyprint lang-c">towlower(u'â‚¬')</code> retourne la <strong class="defin">valeur</strong>Â <code class="cmd">20AC</code> qui est le codeÂ <strong><em class="sigle">UTFâ€‘16</em></strong> du symboleÂ Â«Â <em class="bold">â‚¬</em>Â Â»Â <a class="external" href="https://unicode-table.com/fr/20AC/" target="_BLANK">C</a> puisque ce dernier n'est <strong class="warning">pas</strong> <strong>une lettre</strong>, et donc ne peut Ãªtre Â«Â convertiÂ Â» en minuscule. </li>
  </ul>
</ol>
</div><!-- exemples -->



</section>

</div><!-- #scrollingFrame -->

</div><!-- #mainFrame -->

</body>

</html>


